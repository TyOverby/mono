<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Rpc (async_rpc_kernel.Async_rpc_kernel.Rpc.Rpc)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">async_rpc_kernel</a> &#x00BB; <a href="../../index.html">Async_rpc_kernel</a> &#x00BB; <a href="../index.html">Rpc</a> &#x00BB; Rpc</nav><header class="odoc-preamble"><h1>Module <code><span>Rpc.Rpc</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>('query, 'response) t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : 
  <span>name:string <span class="arrow">&#45;&gt;</span></span>
  <span>version:int <span class="arrow">&#45;&gt;</span></span>
  <span>bin_query:<span><span class="type-var">'query</span> <a href="../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>bin_response:<span><span class="type-var">'response</span> <a href="../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'query</span>, <span class="type-var">'response</span> )</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-name" class="anchored"><a href="#val-name" class="anchor"></a><code><span><span class="keyword">val</span> name : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>the same values as were passed to create.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-version" class="anchored"><a href="#val-version" class="anchor"></a><code><span><span class="keyword">val</span> version : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-description" class="anchored"><a href="#val-description" class="anchor"></a><code><span><span class="keyword">val</span> description : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../Description/index.html#type-t">Description.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-query_type_id" class="anchored"><a href="#val-query_type_id" class="anchor"></a><code><span><span class="keyword">val</span> query_type_id : <span><span><span>( <span class="type-var">'query</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'query</span> <a href="../../../../core/Core/Type_equal/Id/index.html#type-t">Core.Type_equal.Id.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-response_type_id" class="anchored"><a href="#val-response_type_id" class="anchor"></a><code><span><span class="keyword">val</span> response_type_id : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">'response</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'response</span> <a href="../../../../core/Core/Type_equal/Id/index.html#type-t">Core.Type_equal.Id.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bin_query" class="anchored"><a href="#val-bin_query" class="anchor"></a><code><span><span class="keyword">val</span> bin_query : <span><span><span>( <span class="type-var">'query</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'query</span> <a href="../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bin_response" class="anchored"><a href="#val-bin_response" class="anchor"></a><code><span><span class="keyword">val</span> bin_response : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">'response</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'response</span> <a href="../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-implement" class="anchored"><a href="#val-implement" class="anchor"></a><code><span><span class="keyword">val</span> implement : 
  <span>?on_exception:<a href="../On_exception/index.html#type-t">On_exception.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'query</span>, <span class="type-var">'response</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'connection_state</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'query</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'response</span> <a href="../../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_kernel.Deferred.t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'connection_state</span> <a href="../Implementation/index.html#type-t">Implementation.t</a></span></span></code></div><div class="spec-doc"><p>If the function that implements the RPC raises, the implementer does not see the exception. Instead, it is sent as an error to the caller of the RPC, i.e. the process that called <code>dispatch</code> or one of its alternatives.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-implement'" class="anchored"><a href="#val-implement'" class="anchor"></a><code><span><span class="keyword">val</span> implement' : 
  <span>?on_exception:<a href="../On_exception/index.html#type-t">On_exception.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'query</span>, <span class="type-var">'response</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'connection_state</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'query</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'response</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'connection_state</span> <a href="../Implementation/index.html#type-t">Implementation.t</a></span></span></code></div><div class="spec-doc"><p><code>implement'</code> is different from <code>implement</code> in that:</p><p>1. <code>'response</code> is immediately serialized and scheduled for delivery to the RPC dispatcher.</p><p>2. Less allocation happens, as none of the Async-related machinery is necessary.</p><p><code>implement</code> also tries to do 1 when possible, but it is guaranteed to happen with <code>implement'</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-dispatch'" class="anchored"><a href="#val-dispatch'" class="anchor"></a><code><span><span class="keyword">val</span> dispatch' : 
  <span><span><span>( <span class="type-var">'query</span>, <span class="type-var">'response</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Connection/index.html#type-t">Connection.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'query</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'response</span> <a href="../../Rpc_result/index.html#type-t">Rpc_result.t</a></span> <a href="../../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_kernel.Deferred.t</a></span></span></code></div><div class="spec-doc"><p><code>dispatch'</code> exposes <code>Rpc_result.t</code> as output. Passing it through <code>rpc_result_to_or_error</code> gives you the same result as <code>dispatch</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-rpc_result_to_or_error" class="anchored"><a href="#val-rpc_result_to_or_error" class="anchor"></a><code><span><span class="keyword">val</span> rpc_result_to_or_error : 
  <span><span><span>( <span class="type-var">'query</span>, <span class="type-var">'response</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Connection/index.html#type-t">Connection.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'response</span> <a href="../../Rpc_result/index.html#type-t">Rpc_result.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'response</span> <a href="../../../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-dispatch" class="anchored"><a href="#val-dispatch" class="anchor"></a><code><span><span class="keyword">val</span> dispatch : 
  <span><span><span>( <span class="type-var">'query</span>, <span class="type-var">'response</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Connection/index.html#type-t">Connection.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'query</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'response</span> <a href="../../../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span> <a href="../../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_kernel.Deferred.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-dispatch_exn" class="anchored"><a href="#val-dispatch_exn" class="anchor"></a><code><span><span class="keyword">val</span> dispatch_exn : 
  <span><span><span>( <span class="type-var">'query</span>, <span class="type-var">'response</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Connection/index.html#type-t">Connection.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'query</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'response</span> <a href="../../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_kernel.Deferred.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Expert" class="anchored"><a href="#module-Expert" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Expert/index.html">Expert</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>