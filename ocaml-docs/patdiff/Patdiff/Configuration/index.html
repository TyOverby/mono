<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Configuration (patdiff.Patdiff.Configuration)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">patdiff</a> &#x00BB; <a href="../index.html">Patdiff</a> &#x00BB; Configuration</nav><header class="odoc-preamble"><h1>Module <code><span>Patdiff.Configuration</span></code></h1><p>This module extends <a href="../../Patdiff_kernel/Configuration/index.html"><code>Patdiff_kernel.Configuration</code></a> with an on-disk config format and functions to parse them.</p></header><div class="odoc-content"><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">struct</span> <span class="keyword">include</span> <a href="../../Patdiff_kernel/Configuration/index.html">Patdiff_kernel.Configuration</a> <span class="keyword">end</span></span></code></summary><div class="odoc-spec"><div class="spec value" id="val-default_context" class="anchored"><a href="#val-default_context" class="anchor"></a><code><span><span class="keyword">val</span> default_context : int</span></code></div><div class="spec-doc"><p>Default amount of context shown around each change in the diff</p></div></div><p>The following constants were all chosen empirically.</p><div class="odoc-spec"><div class="spec value" id="val-default_line_big_enough" class="anchored"><a href="#val-default_line_big_enough" class="anchor"></a><code><span><span class="keyword">val</span> default_line_big_enough : int</span></code></div><div class="spec-doc"><p>Default cutoff for line-level semantic cleanup. Any match of <code>default_line_big_enough</code> or more will not be deleted, even if it's surrounded by large inserts and deletes. Raising this quantity can only decrease the number of matches, and lowering it can only increase the number of matches.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-default_word_big_enough" class="anchored"><a href="#val-default_word_big_enough" class="anchor"></a><code><span><span class="keyword">val</span> default_word_big_enough : int</span></code></div><div class="spec-doc"><p>Analogous to <a href="#val-default_line_big_enough"><code>default_line_big_enough</code></a>, but for word-level refinement</p></div></div><div class="odoc-spec"><div class="spec value" id="val-too_short_to_split" class="anchored"><a href="#val-too_short_to_split" class="anchor"></a><code><span><span class="keyword">val</span> too_short_to_split : int</span></code></div><div class="spec-doc"><p>Governs the behavior of <code>split_for_readability</code>. We will only split ranges around matches of size greater than <code>too_short_to_split</code>. Note that this should always be at least 1, otherwise we will split on a single `Newline token. Raising this quantity will result in less ranges being split, and setting it to infinity is the same as passing in <code>~interleave:false</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-warn_if_no_trailing_newline_in_both_default" class="anchored"><a href="#val-warn_if_no_trailing_newline_in_both_default" class="anchor"></a><code><span><span class="keyword">val</span> warn_if_no_trailing_newline_in_both_default : bool</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <span class="keyword">private</span> </span><span>{</span></code><table><tr id="type-t.output" class="anchored"><td class="def record field"><a href="#type-t.output" class="anchor"></a><code><span>output : <a href="../../Patdiff_kernel/Output/index.html#type-t">Patdiff_kernel.Output.t</a>;</span></code></td></tr><tr id="type-t.rules" class="anchored"><td class="def record field"><a href="#type-t.rules" class="anchor"></a><code><span>rules : <a href="../../Patdiff_kernel/Format/Rules/index.html#type-t">Patdiff_kernel.Format.Rules.t</a>;</span></code></td></tr><tr id="type-t.float_tolerance" class="anchored"><td class="def record field"><a href="#type-t.float_tolerance" class="anchor"></a><code><span>float_tolerance : <span><a href="../../../core/Core/Percent/index.html#type-t">Core.Percent.t</a> option</span>;</span></code></td></tr><tr id="type-t.produce_unified_lines" class="anchored"><td class="def record field"><a href="#type-t.produce_unified_lines" class="anchor"></a><code><span>produce_unified_lines : bool;</span></code></td></tr><tr id="type-t.unrefined" class="anchored"><td class="def record field"><a href="#type-t.unrefined" class="anchor"></a><code><span>unrefined : bool;</span></code></td></tr><tr id="type-t.keep_ws" class="anchored"><td class="def record field"><a href="#type-t.keep_ws" class="anchor"></a><code><span>keep_ws : bool;</span></code></td></tr><tr id="type-t.split_long_lines" class="anchored"><td class="def record field"><a href="#type-t.split_long_lines" class="anchor"></a><code><span>split_long_lines : bool;</span></code></td></tr><tr id="type-t.interleave" class="anchored"><td class="def record field"><a href="#type-t.interleave" class="anchor"></a><code><span>interleave : bool;</span></code></td></tr><tr id="type-t.assume_text" class="anchored"><td class="def record field"><a href="#type-t.assume_text" class="anchor"></a><code><span>assume_text : bool;</span></code></td></tr><tr id="type-t.context" class="anchored"><td class="def record field"><a href="#type-t.context" class="anchor"></a><code><span>context : int;</span></code></td></tr><tr id="type-t.line_big_enough" class="anchored"><td class="def record field"><a href="#type-t.line_big_enough" class="anchor"></a><code><span>line_big_enough : int;</span></code></td></tr><tr id="type-t.word_big_enough" class="anchored"><td class="def record field"><a href="#type-t.word_big_enough" class="anchor"></a><code><span>word_big_enough : int;</span></code></td></tr><tr id="type-t.shallow" class="anchored"><td class="def record field"><a href="#type-t.shallow" class="anchor"></a><code><span>shallow : bool;</span></code></td></tr><tr id="type-t.quiet" class="anchored"><td class="def record field"><a href="#type-t.quiet" class="anchor"></a><code><span>quiet : bool;</span></code></td></tr><tr id="type-t.double_check" class="anchored"><td class="def record field"><a href="#type-t.double_check" class="anchor"></a><code><span>double_check : bool;</span></code></td></tr><tr id="type-t.mask_uniques" class="anchored"><td class="def record field"><a href="#type-t.mask_uniques" class="anchor"></a><code><span>mask_uniques : bool;</span></code></td></tr><tr id="type-t.prev_alt" class="anchored"><td class="def record field"><a href="#type-t.prev_alt" class="anchor"></a><code><span>prev_alt : <span>string option</span>;</span></code></td></tr><tr id="type-t.next_alt" class="anchored"><td class="def record field"><a href="#type-t.next_alt" class="anchor"></a><code><span>next_alt : <span>string option</span>;</span></code></td></tr><tr id="type-t.location_style" class="anchored"><td class="def record field"><a href="#type-t.location_style" class="anchor"></a><code><span>location_style : <a href="../../Patdiff_kernel/Format/Location_style/index.html#type-t">Patdiff_kernel.Format.Location_style.t</a>;</span></code></td></tr><tr id="type-t.warn_if_no_trailing_newline_in_both" class="anchored"><td class="def record field"><a href="#type-t.warn_if_no_trailing_newline_in_both" class="anchor"></a><code><span>warn_if_no_trailing_newline_in_both : bool;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../../../ppx_compare/Ppx_compare_lib/Comparable/module-type-S/index.html">Ppx_compare_lib.Comparable.S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../ppx_compare/Ppx_compare_lib/Comparable/module-type-S/index.html#type-t">t</a> := <a href="#type-t">t</a></span></span></code></summary><div class="odoc-spec"><div class="spec value" id="val-compare" class="anchored"><a href="#val-compare" class="anchor"></a><code><span><span class="keyword">val</span> compare : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div></details></div><div class="odoc-spec"><div class="spec value" id="val-warn_if_no_trailing_newline_in_both" class="anchored"><a href="#val-warn_if_no_trailing_newline_in_both" class="anchor"></a><code><span><span class="keyword">val</span> warn_if_no_trailing_newline_in_both : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-location_style" class="anchored"><a href="#val-location_style" class="anchor"></a><code><span><span class="keyword">val</span> location_style : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Patdiff_kernel/Format/Location_style/index.html#type-t">Patdiff_kernel.Format.Location_style.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-next_alt" class="anchored"><a href="#val-next_alt" class="anchor"></a><code><span><span class="keyword">val</span> next_alt : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-prev_alt" class="anchored"><a href="#val-prev_alt" class="anchor"></a><code><span><span class="keyword">val</span> prev_alt : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mask_uniques" class="anchored"><a href="#val-mask_uniques" class="anchor"></a><code><span><span class="keyword">val</span> mask_uniques : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-double_check" class="anchored"><a href="#val-double_check" class="anchor"></a><code><span><span class="keyword">val</span> double_check : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-quiet" class="anchored"><a href="#val-quiet" class="anchor"></a><code><span><span class="keyword">val</span> quiet : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-shallow" class="anchored"><a href="#val-shallow" class="anchor"></a><code><span><span class="keyword">val</span> shallow : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-word_big_enough" class="anchored"><a href="#val-word_big_enough" class="anchor"></a><code><span><span class="keyword">val</span> word_big_enough : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-line_big_enough" class="anchored"><a href="#val-line_big_enough" class="anchor"></a><code><span><span class="keyword">val</span> line_big_enough : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-context" class="anchored"><a href="#val-context" class="anchor"></a><code><span><span class="keyword">val</span> context : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-assume_text" class="anchored"><a href="#val-assume_text" class="anchor"></a><code><span><span class="keyword">val</span> assume_text : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-interleave" class="anchored"><a href="#val-interleave" class="anchor"></a><code><span><span class="keyword">val</span> interleave : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-split_long_lines" class="anchored"><a href="#val-split_long_lines" class="anchor"></a><code><span><span class="keyword">val</span> split_long_lines : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-keep_ws" class="anchored"><a href="#val-keep_ws" class="anchor"></a><code><span><span class="keyword">val</span> keep_ws : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-unrefined" class="anchored"><a href="#val-unrefined" class="anchor"></a><code><span><span class="keyword">val</span> unrefined : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-produce_unified_lines" class="anchored"><a href="#val-produce_unified_lines" class="anchor"></a><code><span><span class="keyword">val</span> produce_unified_lines : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-float_tolerance" class="anchored"><a href="#val-float_tolerance" class="anchor"></a><code><span><span class="keyword">val</span> float_tolerance : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../core/Core/Percent/index.html#type-t">Core.Percent.t</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-rules" class="anchored"><a href="#val-rules" class="anchor"></a><code><span><span class="keyword">val</span> rules : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Patdiff_kernel/Format/Rules/index.html#type-t">Patdiff_kernel.Format.Rules.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-output" class="anchored"><a href="#val-output" class="anchor"></a><code><span><span class="keyword">val</span> output : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Patdiff_kernel/Output/index.html#type-t">Patdiff_kernel.Output.t</a></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Fields" class="anchored"><a href="#module-Fields" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Fields/index.html">Fields</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sexp_of_t" class="anchored"><a href="#val-sexp_of_t" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_t : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t</span></code></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../../../base/Base/Invariant/module-type-S/index.html">Core.Invariant.S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../base/Base/Invariant/module-type-S/index.html#type-t">t</a> := <a href="#type-t">t</a></span></span></code></summary><div class="odoc-spec"><div class="spec value" id="val-invariant" class="anchored"><a href="#val-invariant" class="anchor"></a><code><span><span class="keyword">val</span> invariant : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div></details></div><div class="odoc-spec"><div class="spec value" id="val-create_exn" class="anchored"><a href="#val-create_exn" class="anchor"></a><code><span><span class="keyword">val</span> create_exn : 
  <span>output:<a href="../../Patdiff_kernel/Output/index.html#type-t">Patdiff_kernel.Output.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>rules:<a href="../../Patdiff_kernel/Format/Rules/index.html#type-t">Patdiff_kernel.Format.Rules.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>float_tolerance:<span><a href="../../../core/Core/Percent/index.html#type-t">Core.Percent.t</a> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span>produce_unified_lines:bool <span class="arrow">&#45;&gt;</span></span>
  <span>unrefined:bool <span class="arrow">&#45;&gt;</span></span>
  <span>keep_ws:bool <span class="arrow">&#45;&gt;</span></span>
  <span>split_long_lines:bool <span class="arrow">&#45;&gt;</span></span>
  <span>interleave:bool <span class="arrow">&#45;&gt;</span></span>
  <span>assume_text:bool <span class="arrow">&#45;&gt;</span></span>
  <span>context:int <span class="arrow">&#45;&gt;</span></span>
  <span>line_big_enough:int <span class="arrow">&#45;&gt;</span></span>
  <span>word_big_enough:int <span class="arrow">&#45;&gt;</span></span>
  <span>shallow:bool <span class="arrow">&#45;&gt;</span></span>
  <span>quiet:bool <span class="arrow">&#45;&gt;</span></span>
  <span>double_check:bool <span class="arrow">&#45;&gt;</span></span>
  <span>mask_uniques:bool <span class="arrow">&#45;&gt;</span></span>
  <span>prev_alt:<span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  <span>next_alt:<span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  <span>location_style:<a href="../../Patdiff_kernel/Format/Location_style/index.html#type-t">Patdiff_kernel.Format.Location_style.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>warn_if_no_trailing_newline_in_both:bool <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Raises if <code>invariant t</code> fails.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-override" class="anchored"><a href="#val-override" class="anchor"></a><code><span><span class="keyword">val</span> override : 
  <span>?output:<a href="../../Patdiff_kernel/Output/index.html#type-t">Patdiff_kernel.Output.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?rules:<a href="../../Patdiff_kernel/Format/Rules/index.html#type-t">Patdiff_kernel.Format.Rules.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?float_tolerance:<span><a href="../../../core/Core/Percent/index.html#type-t">Core.Percent.t</a> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?produce_unified_lines:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?unrefined:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?keep_ws:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?split_long_lines:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?interleave:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?assume_text:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?context:int <span class="arrow">&#45;&gt;</span></span>
  <span>?line_big_enough:int <span class="arrow">&#45;&gt;</span></span>
  <span>?word_big_enough:int <span class="arrow">&#45;&gt;</span></span>
  <span>?shallow:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?quiet:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?double_check:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?mask_uniques:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?prev_alt:<span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?next_alt:<span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?location_style:<a href="../../Patdiff_kernel/Format/Location_style/index.html#type-t">Patdiff_kernel.Format.Location_style.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?warn_if_no_trailing_newline_in_both:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-default" class="anchored"><a href="#val-default" class="anchor"></a><code><span><span class="keyword">val</span> default : <a href="#type-t">t</a></span></code></div></div></details></div><div class="odoc-spec"><div class="spec value" id="val-load" class="anchored"><a href="#val-load" class="anchor"></a><code><span><span class="keyword">val</span> load : <span>?quiet_errors:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-dark_bg" class="anchored"><a href="#val-dark_bg" class="anchor"></a><code><span><span class="keyword">val</span> dark_bg : <span><a href="#type-t">t</a> <a href="../../../core/Core/Lazy/index.html#type-t">Core.Lazy.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-light_bg" class="anchored"><a href="#val-light_bg" class="anchor"></a><code><span><span class="keyword">val</span> light_bg : <span><a href="#type-t">t</a> <a href="../../../core/Core/Lazy/index.html#type-t">Core.Lazy.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-On_disk" class="anchored"><a href="#module-On_disk" class="anchor"></a><code><span><span class="keyword">module</span> <a href="On_disk/index.html">On_disk</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-parse" class="anchored"><a href="#val-parse" class="anchor"></a><code><span><span class="keyword">val</span> parse : <span><a href="On_disk/index.html#type-t">On_disk.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-save_default" class="anchored"><a href="#val-save_default" class="anchor"></a><code><span><span class="keyword">val</span> save_default : <span>filename:string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-get_config" class="anchored"><a href="#val-get_config" class="anchor"></a><code><span><span class="keyword">val</span> get_config : <span>?filename:string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Reads a config from <code>filename</code>, which by default is <code>~/.patdiff</code>. If <code>~filename:&quot;&quot;</code> is passed or <code>filename</code> cannot be read, returns <code>default</code>.</p></div></div></div></body></html>