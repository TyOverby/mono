<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Version_util (core_kernel.Version_util)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">core_kernel</a> &#x00BB; Version_util</nav><header class="odoc-preamble"><h1>Module <code><span>Version_util</span></code></h1><p>This module gives access to the same version/build information returned by <code>Command</code>-based executables when called with the <code>-version</code> or <code>-build-info</code> flags by <code>$0 version (-build-info | -version)</code> or <code>$0 (-build-info | -version)</code>.</p><p>Here's how it works: we arrange for the build system to, at link time, include an object file that defines symbols that version_util.ml uses to get the strings that contain the information that this module provides. When building with OMake, our OMakeroot runs build_info.sh to generate *.build_info.c with the symbols and that is linked in.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value" id="val-version_list" class="anchored"><a href="#val-version_list" class="anchor"></a><code><span><span class="keyword">val</span> version_list : <span>string list</span></span></code></div><div class="spec-doc"><p>All hg repos and their revision.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-version" class="anchored"><a href="#val-version" class="anchor"></a><code><span><span class="keyword">val</span> version : string</span></code></div><div class="spec-doc"><p>Like <code>version_list</code> but space separated. Consider using <code>version_list</code> instead.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Version" class="anchored"><a href="#module-Version" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Version/index.html">Version</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-arg_spec" class="anchored"><a href="#val-arg_spec" class="anchor"></a><code><span><span class="keyword">val</span> arg_spec : <span><span>(string * <a href="../../core/Core/Arg/index.html#type-spec">Core.Arg.spec</a> * string)</span> list</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Application_specific_fields" class="anchored"><a href="#module-Application_specific_fields" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Application_specific_fields/index.html">Application_specific_fields</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>Application_specific_fields</code> is a single field in the build-info sexp that holds a <code>Sexp.t String.Map.t</code>, which can be chosen by the application to hold custom fields that it needs.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-build_info" class="anchored"><a href="#val-build_info" class="anchor"></a><code><span><span class="keyword">val</span> build_info : string</span></code></div><div class="spec-doc"><p>Various additional information about the circumstances of the build: who built it, when, on what machine, etc. <code>build_info</code> is the information as it was generated by the build system. <code>reprint_build_info</code> parses and prints the string back, which alters a bit the layout and order of the fields but more importantly allows to display times in the current zone.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-build_info_as_sexp" class="anchored"><a href="#val-build_info_as_sexp" class="anchor"></a><code><span><span class="keyword">val</span> build_info_as_sexp : <a href="../../core/Core/Sexp/index.html#type-t">Core.Sexp.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-reprint_build_info" class="anchored"><a href="#val-reprint_build_info" class="anchor"></a><code><span><span class="keyword">val</span> reprint_build_info : <span><span>( <span><a href="../../core/Core/Time/index.html#type-t">Core.Time.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../core/Core/Sexp/index.html#type-t">Core.Sexp.t</a> )</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-username" class="anchored"><a href="#val-username" class="anchor"></a><code><span><span class="keyword">val</span> username : <span>string option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-hostname" class="anchored"><a href="#val-hostname" class="anchor"></a><code><span><span class="keyword">val</span> hostname : <span>string option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-kernel" class="anchored"><a href="#val-kernel" class="anchor"></a><code><span><span class="keyword">val</span> kernel : <span>string option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-build_time" class="anchored"><a href="#val-build_time" class="anchor"></a><code><span><span class="keyword">val</span> build_time : <span><a href="../../core/Core/Time/index.html#type-t">Core.Time.t</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-x_library_inlining" class="anchored"><a href="#val-x_library_inlining" class="anchor"></a><code><span><span class="keyword">val</span> x_library_inlining : bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-dynlinkable_code" class="anchored"><a href="#val-dynlinkable_code" class="anchor"></a><code><span><span class="keyword">val</span> dynlinkable_code : bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-compiled_for_speed" class="anchored"><a href="#val-compiled_for_speed" class="anchor"></a><code><span><span class="keyword">val</span> compiled_for_speed : bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-application_specific_fields" class="anchored"><a href="#val-application_specific_fields" class="anchor"></a><code><span><span class="keyword">val</span> application_specific_fields : <span><a href="Application_specific_fields/index.html#type-t">Application_specific_fields.t</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-ocaml_version" class="anchored"><a href="#val-ocaml_version" class="anchor"></a><code><span><span class="keyword">val</span> ocaml_version : string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-allowed_projections" class="anchored"><a href="#val-allowed_projections" class="anchor"></a><code><span><span class="keyword">val</span> allowed_projections : <span><span>string list</span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-executable_path" class="anchored"><a href="#val-executable_path" class="anchor"></a><code><span><span class="keyword">val</span> executable_path : string</span></code></div><div class="spec-doc"><p>Relative to OMakeroot dir</p></div></div><div class="odoc-spec"><div class="spec value" id="val-build_system" class="anchored"><a href="#val-build_system" class="anchor"></a><code><span><span class="keyword">val</span> build_system : string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-with_fdo" class="anchored"><a href="#val-with_fdo" class="anchor"></a><code><span><span class="keyword">val</span> with_fdo : <span><span>(string * <span><a href="../../core/Core/Md5/index.html#type-t">Core.Md5.t</a> option</span>)</span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-For_tests" class="anchored"><a href="#module-For_tests" class="anchor"></a><code><span><span class="keyword">module</span> <a href="For_tests/index.html">For_tests</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-build_system_supports_version_util" class="anchored"><a href="#val-build_system_supports_version_util" class="anchor"></a><code><span><span class="keyword">val</span> build_system_supports_version_util : bool</span></code></div><div class="spec-doc"><p>If <code>false</code>, all the variables above are filled in with bogus values. The value is <code>false</code> in tests at the moment.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Expert" class="anchored"><a href="#module-Expert" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Expert/index.html">Expert</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>