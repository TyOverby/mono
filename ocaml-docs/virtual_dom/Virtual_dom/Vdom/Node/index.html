<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Node (virtual_dom.Virtual_dom.Vdom.Node)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">virtual_dom</a> &#x00BB; <a href="../../index.html">Virtual_dom</a> &#x00BB; <a href="../index.html">Vdom</a> &#x00BB; Node</nav><header class="odoc-preamble"><h1>Module <code><span>Vdom.Node</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module" id="module-Element" class="anchored"><a href="#module-Element" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Element/index.html">Element</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The values associated with an Element and element like nodes. (that is in practice all nodes that aren't just text).</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Widget" class="anchored"><a href="#module-Widget" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Widget/index.html">Widget</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span></code><table><tr id="type-t.None" class="anchored"><td class="def variant constructor"><a href="#type-t.None" class="anchor"></a><code><span>| </span><span><span class="constructor">None</span></span></code></td></tr><tr id="type-t.Text" class="anchored"><td class="def variant constructor"><a href="#type-t.Text" class="anchor"></a><code><span>| </span><span><span class="constructor">Text</span> <span class="keyword">of</span> <a href="../../../../base/Base/index.html#type-string">Base.string</a></span></code></td></tr><tr id="type-t.Element" class="anchored"><td class="def variant constructor"><a href="#type-t.Element" class="anchor"></a><code><span>| </span><span><span class="constructor">Element</span> <span class="keyword">of</span> <a href="Element/index.html#type-t">Element.t</a></span></code></td></tr><tr id="type-t.Widget" class="anchored"><td class="def variant constructor"><a href="#type-t.Widget" class="anchor"></a><code><span>| </span><span><span class="constructor">Widget</span> <span class="keyword">of</span> <a href="Widget/index.html#type-t">Widget.t</a></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type subst" id="type-node_creator" class="anchored"><a href="#type-node_creator" class="anchor"></a><code><span><span class="keyword">type</span> node_creator</span><span> :=
  <span>?key:<a href="../../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?attr:<span class="xref-unresolved">Virtual_dom__Attr.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="#type-t">t</a> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec type subst" id="type-node_creator_childless" class="anchored"><a href="#type-node_creator_childless" class="anchor"></a><code><span><span class="keyword">type</span> node_creator_childless</span><span> :=
  <span>?key:<a href="../../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?attr:<span class="xref-unresolved">Virtual_dom__Attr.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../../base/Base/index.html#type-unit">Base.unit</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Aliases" class="anchored"><a href="#module-Aliases" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Aliases/index.html">Aliases</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-none" class="anchored"><a href="#val-none" class="anchor"></a><code><span><span class="keyword">val</span> none : <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-text" class="anchored"><a href="#val-text" class="anchor"></a><code><span><span class="keyword">val</span> text : <span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-textf" class="anchored"><a href="#val-textf" class="anchor"></a><code><span><span class="keyword">val</span> textf : <span><span><span>( <span class="type-var">'a</span>, <a href="../../../../base/Base/index.html#type-unit">Base.unit</a>, <a href="../../../../base/Base/index.html#type-string">Base.string</a>, <a href="#type-t">t</a> )</span> <a href="../../../../base/Base/index.html#type-format4">Base.format4</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-a" class="anchored"><a href="#val-a" class="anchor"></a><code><span><span class="keyword">val</span> a : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-body" class="anchored"><a href="#val-body" class="anchor"></a><code><span><span class="keyword">val</span> body : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-button" class="anchored"><a href="#val-button" class="anchor"></a><code><span><span class="keyword">val</span> button : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-code" class="anchored"><a href="#val-code" class="anchor"></a><code><span><span class="keyword">val</span> code : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-div" class="anchored"><a href="#val-div" class="anchor"></a><code><span><span class="keyword">val</span> div : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-main" class="anchored"><a href="#val-main" class="anchor"></a><code><span><span class="keyword">val</span> main : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-footer" class="anchored"><a href="#val-footer" class="anchor"></a><code><span><span class="keyword">val</span> footer : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-fieldset" class="anchored"><a href="#val-fieldset" class="anchor"></a><code><span><span class="keyword">val</span> fieldset : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-h1" class="anchored"><a href="#val-h1" class="anchor"></a><code><span><span class="keyword">val</span> h1 : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-h2" class="anchored"><a href="#val-h2" class="anchor"></a><code><span><span class="keyword">val</span> h2 : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-h3" class="anchored"><a href="#val-h3" class="anchor"></a><code><span><span class="keyword">val</span> h3 : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-h4" class="anchored"><a href="#val-h4" class="anchor"></a><code><span><span class="keyword">val</span> h4 : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-h5" class="anchored"><a href="#val-h5" class="anchor"></a><code><span><span class="keyword">val</span> h5 : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-h6" class="anchored"><a href="#val-h6" class="anchor"></a><code><span><span class="keyword">val</span> h6 : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-header" class="anchored"><a href="#val-header" class="anchor"></a><code><span><span class="keyword">val</span> header : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-html" class="anchored"><a href="#val-html" class="anchor"></a><code><span><span class="keyword">val</span> html : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-input" class="anchored"><a href="#val-input" class="anchor"></a><code><span><span class="keyword">val</span> input : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-textarea" class="anchored"><a href="#val-textarea" class="anchor"></a><code><span><span class="keyword">val</span> textarea : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-select" class="anchored"><a href="#val-select" class="anchor"></a><code><span><span class="keyword">val</span> select : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-option" class="anchored"><a href="#val-option" class="anchor"></a><code><span><span class="keyword">val</span> option : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-label" class="anchored"><a href="#val-label" class="anchor"></a><code><span><span class="keyword">val</span> label : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-li" class="anchored"><a href="#val-li" class="anchor"></a><code><span><span class="keyword">val</span> li : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-p" class="anchored"><a href="#val-p" class="anchor"></a><code><span><span class="keyword">val</span> p : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pre" class="anchored"><a href="#val-pre" class="anchor"></a><code><span><span class="keyword">val</span> pre : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-section" class="anchored"><a href="#val-section" class="anchor"></a><code><span><span class="keyword">val</span> section : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-span" class="anchored"><a href="#val-span" class="anchor"></a><code><span><span class="keyword">val</span> span : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-strong" class="anchored"><a href="#val-strong" class="anchor"></a><code><span><span class="keyword">val</span> strong : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-table" class="anchored"><a href="#val-table" class="anchor"></a><code><span><span class="keyword">val</span> table : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-tbody" class="anchored"><a href="#val-tbody" class="anchor"></a><code><span><span class="keyword">val</span> tbody : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-td" class="anchored"><a href="#val-td" class="anchor"></a><code><span><span class="keyword">val</span> td : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-th" class="anchored"><a href="#val-th" class="anchor"></a><code><span><span class="keyword">val</span> th : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-thead" class="anchored"><a href="#val-thead" class="anchor"></a><code><span><span class="keyword">val</span> thead : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-tr" class="anchored"><a href="#val-tr" class="anchor"></a><code><span><span class="keyword">val</span> tr : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-ul" class="anchored"><a href="#val-ul" class="anchor"></a><code><span><span class="keyword">val</span> ul : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-ol" class="anchored"><a href="#val-ol" class="anchor"></a><code><span><span class="keyword">val</span> ol : <a href="#type-node_creator">node_creator</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-br" class="anchored"><a href="#val-br" class="anchor"></a><code><span><span class="keyword">val</span> br : <a href="#type-node_creator_childless">node_creator_childless</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-hr" class="anchored"><a href="#val-hr" class="anchor"></a><code><span><span class="keyword">val</span> hr : <a href="#type-node_creator_childless">node_creator_childless</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sexp_for_debugging" class="anchored"><a href="#val-sexp_for_debugging" class="anchor"></a><code><span><span class="keyword">val</span> sexp_for_debugging : <span>?indent:<a href="../../../../base/Base/index.html#type-int">Base.int</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../../base/Base/Sexp/index.html#type-t">Base.Sexp.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-inner_html" class="anchored"><a href="#val-inner_html" class="anchor"></a><code><span><span class="keyword">val</span> inner_html : 
  <span>tag:<a href="../../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span>
  <span>attr:<span class="xref-unresolved">Virtual_dom__Attr.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span>this_html_is_sanitized_and_is_totally_safe_trust_me:<a href="../../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>This function can be used to build a node with the tag and html content of that node provided as a string. If this function was called with <code>~tag:&quot;div&quot; [] ~this_html...:&quot;&lt;b&gt; hello world&lt;/b&gt;&quot;</code> then the resulting node would be <code>&lt;div&gt;&lt;b&gt; hello world &lt;/b&gt;&lt;/div&gt;</code></p><p>For totally sanitized content strings, this is fine; but if a user can influence the value of <code>content</code> and you don't have a sanitizer, they can inject code into the page, so use with extreme caution!</p></div></div><div class="odoc-spec"><div class="spec value" id="val-inner_html_svg" class="anchored"><a href="#val-inner_html_svg" class="anchor"></a><code><span><span class="keyword">val</span> inner_html_svg : 
  <span>tag:<a href="../../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span>
  <span>attr:<span class="xref-unresolved">Virtual_dom__Attr.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span>this_html_is_sanitized_and_is_totally_safe_trust_me:<a href="../../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Same as <code>inner_html</code> but for svg elements</p></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-node_creator">node_creator</a></span></code></div><div class="spec-doc"><p><code>key</code> is used by Virtual_dom as a hint during diffing/patching</p></div></div><div class="odoc-spec"><div class="spec value" id="val-create_svg" class="anchored"><a href="#val-create_svg" class="anchor"></a><code><span><span class="keyword">val</span> create_svg : <span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-node_creator">node_creator</a></span></code></div><div class="spec-doc"><p>Like <code>create</code> but for svg nodes (i.e. all to be placed inside &lt;svg&gt; tag). This is needed as browsers maintain separate namespaces for html and svg, and failing to use the correct one may result in delayed redraws.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_dom" class="anchored"><a href="#val-to_dom" class="anchor"></a><code><span><span class="keyword">val</span> to_dom : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Js_of_ocaml</span>.Dom_html.element <span class="xref-unresolved">Js_of_ocaml</span>.Js.t</span></span></code></div><div class="spec-doc"><p>Creates a new browser DOM element from a virtual-dom node. Note that calling this function will give you a brand new element, which you then have to put into the DOM yourself. Thus, you should probably not be calling this very often, since Bonsai and Incr_dom both take care calling this function on the top-level view node.</p><p>The one situation where <code>to_dom</code> is useful for the typical user is with the Widget API, since building a Widget entails generating the browser DOM element.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_raw" class="anchored"><a href="#val-to_raw" class="anchor"></a><code><span><span class="keyword">val</span> to_raw : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Virtual_dom__</span>.Gen_js_api.Ojs.t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-widget" class="anchored"><a href="#val-widget" class="anchor"></a><code><span><span class="keyword">val</span> widget : 
  <span>?info:<span><a href="../../../../base/Base/Sexp/index.html#type-t">Base.Sexp.t</a> <a href="../../../../base/Base/Lazy/index.html#type-t">Base.Lazy.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?destroy:
    <span>( <span><span class="type-var">'s</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="xref-unresolved">Js_of_ocaml</span>.Dom_html.element <span class="keyword">as</span> 'e <span class="xref-unresolved">Js_of_ocaml</span>.Js.t</span> <span class="arrow">&#45;&gt;</span></span> <a href="../../../../base/Base/index.html#type-unit">Base.unit</a> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?update:<span>( <span><span class="type-var">'s</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'e</span> <span class="xref-unresolved">Js_of_ocaml</span>.Js.t</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'s</span> * <span><span class="type-var">'e</span> <span class="xref-unresolved">Js_of_ocaml</span>.Js.t</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>id:<span><span>(<span class="type-var">'s</span> * <span><span class="type-var">'e</span> <span class="xref-unresolved">Js_of_ocaml</span>.Js.t</span>)</span> <a href="../../../../base/Base/Type_equal/Id/index.html#type-t">Base.Type_equal.Id.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>init:<span>( <span><a href="../../../../base/Base/index.html#type-unit">Base.unit</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'s</span> * <span><span class="type-var">'e</span> <span class="xref-unresolved">Js_of_ocaml</span>.Js.t</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../../base/Base/index.html#type-unit">Base.unit</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Creates a Node.t that has fine-grained control over the Browser DOM node.</p><p>Callbacks =========</p><p>init: Returns a Browser DOM Node and a widget state object. The Browser DOM node is mounted into the dom in the location where the Node.t object would otherwise be.</p><p>update: Given the previous Browser DOM Node and state, makes any changes necessary to either and returns a new state and Browser DOM Node.</p><p>destroy: Called when this Node.t is removed from the Virtual_dom. Performs any necessary cleanup.</p><p>Other =====</p><p>The <code>id</code> is used to compare widgets, and is used to make sure that the state from one widget doesn't get interpreted as the state for another. Otherwise, you would be able to implement Obj.magic using this API.</p><p>WARNING: While other Virtual_dom APIs shield the application from script injection attacks, the <code>Widget.create</code> function allows a developer to bypass these safeguards and manually create DOM nodes which could allow an attacker to change the behavior of the application or exfiltrate data.</p><p>In using this API, you are being trusted to understand and follow security best-practices.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-widget_of_module" class="anchored"><a href="#val-widget_of_module" class="anchor"></a><code><span><span class="keyword">val</span> widget_of_module : 
  <span><span>(<span class="keyword">module</span> <a href="Widget/module-type-S/index.html">Widget.S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="Widget/module-type-S/Input/index.html#type-t">Input.t</a> = <span class="type-var">'input</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'input</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a> )</span> <a href="../../../../base/Base/Staged/index.html#type-t">Base.Staged.t</a></span></span></code></div><div class="spec-doc"><p><code>widget_of_module</code> is very similar to <code>widget</code>, but it pulls all of the callbacks out into a first-class module. Read the comment for <code>widget</code> to learn more.</p><p>It is very important that you call <code>widget_of_module</code> exactly once for any &quot;widget class&quot; that you want to construct. Otherwise, the nodes created by it won't be comparable against one another and the widget-diffing will just run <code>destroy, init, destroy, init</code> over and over.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Patch" class="anchored"><a href="#module-Patch" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Patch/index.html">Patch</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Expert" class="anchored"><a href="#module-Expert" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Expert/index.html">Expert</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>