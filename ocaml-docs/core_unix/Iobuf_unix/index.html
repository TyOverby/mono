<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Iobuf_unix (core_unix.Iobuf_unix)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">core_unix</a> &#x00BB; Iobuf_unix</nav><header class="odoc-preamble"><h1>Module <code><span>Iobuf_unix</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#expert">Expert</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec module-substitution" id="module-Unix" class="anchored"><a href="#module-Unix" class="anchor"></a><code><span><span class="keyword">module</span> Unix := <a href="../Core_unix/index.html">Core_unix</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-ok_or_eof" class="anchored"><a href="#type-ok_or_eof" class="anchor"></a><code><span><span class="keyword">type</span> ok_or_eof</span><span> = </span></code><table><tr id="type-ok_or_eof.Ok" class="anchored"><td class="def variant constructor"><a href="#type-ok_or_eof.Ok" class="anchor"></a><code><span>| </span><span><span class="constructor">Ok</span></span></code></td></tr><tr id="type-ok_or_eof.Eof" class="anchored"><td class="def variant constructor"><a href="#type-ok_or_eof.Eof" class="anchor"></a><code><span>| </span><span><span class="constructor">Eof</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-compare_ok_or_eof" class="anchored"><a href="#val-compare_ok_or_eof" class="anchor"></a><code><span><span class="keyword">val</span> compare_ok_or_eof : <span><a href="#type-ok_or_eof">ok_or_eof</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-ok_or_eof">ok_or_eof</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sexp_of_ok_or_eof" class="anchored"><a href="#val-sexp_of_ok_or_eof" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_ok_or_eof : <span><a href="#type-ok_or_eof">ok_or_eof</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-input" class="anchored"><a href="#val-input" class="anchor"></a><code><span><span class="keyword">val</span> input : 
  <span><span><span>( <span>[&gt; <a href="../../core/Core/index.html#type-write">Core.write</a> ]</span>, <a href="../../core_kernel/Iobuf/index.html#type-seek">Iobuf.seek</a> )</span> <a href="../../core_kernel/Iobuf/index.html#type-t">Iobuf.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../stdio/Stdio/In_channel/index.html#type-t">Core.In_channel.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-ok_or_eof">ok_or_eof</a></span></code></div><div class="spec-doc"><p><code>Iobuf</code> has analogs of various <code>Bigstring</code> functions. These analogs advance by the amount written/read.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read" class="anchored"><a href="#val-read" class="anchor"></a><code><span><span class="keyword">val</span> read : 
  <span><span><span>( <span>[&gt; <a href="../../core/Core/index.html#type-write">Core.write</a> ]</span>, <a href="../../core_kernel/Iobuf/index.html#type-seek">Iobuf.seek</a> )</span> <a href="../../core_kernel/Iobuf/index.html#type-t">Iobuf.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-ok_or_eof">ok_or_eof</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-read_assume_fd_is_nonblocking" class="anchored"><a href="#val-read_assume_fd_is_nonblocking" class="anchor"></a><code><span><span class="keyword">val</span> read_assume_fd_is_nonblocking : 
  <span><span><span>( <span>[&gt; <a href="../../core/Core/index.html#type-write">Core.write</a> ]</span>, <a href="../../core_kernel/Iobuf/index.html#type-seek">Iobuf.seek</a> )</span> <a href="../../core_kernel/Iobuf/index.html#type-t">Iobuf.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../Core_unix/Syscall_result/Unit/index.html#type-t">Core_unix.Syscall_result.Unit.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pread_assume_fd_is_nonblocking" class="anchored"><a href="#val-pread_assume_fd_is_nonblocking" class="anchor"></a><code><span><span class="keyword">val</span> pread_assume_fd_is_nonblocking : 
  <span><span><span>( <span>[&gt; <a href="../../core/Core/index.html#type-write">Core.write</a> ]</span>, <a href="../../core_kernel/Iobuf/index.html#type-seek">Iobuf.seek</a> )</span> <a href="../../core_kernel/Iobuf/index.html#type-t">Iobuf.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>offset:int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-recvfrom_assume_fd_is_nonblocking" class="anchored"><a href="#val-recvfrom_assume_fd_is_nonblocking" class="anchor"></a><code><span><span class="keyword">val</span> recvfrom_assume_fd_is_nonblocking : 
  <span><span><span>( <span>[&gt; <a href="../../core/Core/index.html#type-write">Core.write</a> ]</span>, <a href="../../core_kernel/Iobuf/index.html#type-seek">Iobuf.seek</a> )</span> <a href="../../core_kernel/Iobuf/index.html#type-t">Iobuf.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../Core_unix/index.html#type-sockaddr">Core_unix.sockaddr</a></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Recvmmsg_context" class="anchored"><a href="#module-Recvmmsg_context" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Recvmmsg_context/index.html">Recvmmsg_context</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>recvmmsg</code>'s context comprises data needed by the system call. Setup can be expensive, particularly for many buffers.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-recvmmsg_assume_fd_is_nonblocking" class="anchored"><a href="#val-recvmmsg_assume_fd_is_nonblocking" class="anchor"></a><code><span><span class="keyword">val</span> recvmmsg_assume_fd_is_nonblocking : 
  <span><span>( <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span>
    <span><a href="Recvmmsg_context/index.html#type-t">Recvmmsg_context.t</a> <span class="arrow">&#45;&gt;</span></span>
    <a href="../Core_unix/Syscall_result/Int/index.html#type-t">Core_unix.Syscall_result.Int.t</a> )</span>
    <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>recvmmsg_assume_fd_is_nonblocking fd context</code> returns the number of <code>context</code> iobufs read into (or <code>errno</code>). <code>fd</code> must not block. <code>THREAD_IO_CUTOFF</code> is ignored.</p><p><code>EINVAL</code> is returned if an <code>Iobuf</code> passed to <code>Recvmmsg_context.create</code> has its <code>buf</code> or limits changed.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-send_nonblocking_no_sigpipe" class="anchored"><a href="#val-send_nonblocking_no_sigpipe" class="anchor"></a><code><span><span class="keyword">val</span> send_nonblocking_no_sigpipe : 
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span><span>( <span>[&gt; <a href="../../core/Core/index.html#type-read">Core.read</a> ]</span>, <a href="../../core_kernel/Iobuf/index.html#type-seek">Iobuf.seek</a> )</span> <a href="../../core_kernel/Iobuf/index.html#type-t">Iobuf.t</a></span> <span class="arrow">&#45;&gt;</span></span>
    <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span>
    <a href="../Core_unix/Syscall_result/Unit/index.html#type-t">Core_unix.Syscall_result.Unit.t</a> )</span>
    <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sendto_nonblocking_no_sigpipe" class="anchored"><a href="#val-sendto_nonblocking_no_sigpipe" class="anchor"></a><code><span><span class="keyword">val</span> sendto_nonblocking_no_sigpipe : 
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span><span>( <span>[&gt; <a href="../../core/Core/index.html#type-read">Core.read</a> ]</span>, <a href="../../core_kernel/Iobuf/index.html#type-seek">Iobuf.seek</a> )</span> <a href="../../core_kernel/Iobuf/index.html#type-t">Iobuf.t</a></span> <span class="arrow">&#45;&gt;</span></span>
    <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span>
    <span><a href="../Core_unix/index.html#type-sockaddr">Core_unix.sockaddr</a> <span class="arrow">&#45;&gt;</span></span>
    <a href="../Core_unix/Syscall_result/Unit/index.html#type-t">Core_unix.Syscall_result.Unit.t</a> )</span>
    <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Peek" class="anchored"><a href="#module-Peek" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Peek/index.html">Peek</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Write from the iobuf to the specified channel without changing the iobuf window. Returns the number of bytes written.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-output" class="anchored"><a href="#val-output" class="anchor"></a><code><span><span class="keyword">val</span> output : 
  <span><span><span>( <span>[&gt; <a href="../../core/Core/index.html#type-read">Core.read</a> ]</span>, <a href="../../core_kernel/Iobuf/index.html#type-seek">Iobuf.seek</a> )</span> <a href="../../core_kernel/Iobuf/index.html#type-t">Iobuf.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../stdio/Stdio/Out_channel/index.html#type-t">Core.Out_channel.t</a> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>As <code>Peek</code>, but advances the window by the number of bytes written.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-write" class="anchored"><a href="#val-write" class="anchor"></a><code><span><span class="keyword">val</span> write : 
  <span><span><span>( <span>[&gt; <a href="../../core/Core/index.html#type-read">Core.read</a> ]</span>, <a href="../../core_kernel/Iobuf/index.html#type-seek">Iobuf.seek</a> )</span> <a href="../../core_kernel/Iobuf/index.html#type-t">Iobuf.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-write_assume_fd_is_nonblocking" class="anchored"><a href="#val-write_assume_fd_is_nonblocking" class="anchor"></a><code><span><span class="keyword">val</span> write_assume_fd_is_nonblocking : 
  <span><span><span>( <span>[&gt; <a href="../../core/Core/index.html#type-read">Core.read</a> ]</span>, <a href="../../core_kernel/Iobuf/index.html#type-seek">Iobuf.seek</a> )</span> <a href="../../core_kernel/Iobuf/index.html#type-t">Iobuf.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pwrite_assume_fd_is_nonblocking" class="anchored"><a href="#val-pwrite_assume_fd_is_nonblocking" class="anchor"></a><code><span><span class="keyword">val</span> pwrite_assume_fd_is_nonblocking : 
  <span><span><span>( <span>[&gt; <a href="../../core/Core/index.html#type-read">Core.read</a> ]</span>, <a href="../../core_kernel/Iobuf/index.html#type-seek">Iobuf.seek</a> )</span> <a href="../../core_kernel/Iobuf/index.html#type-t">Iobuf.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>offset:int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><h3 id="expert"><a href="#expert" class="anchor"></a>Expert</h3><div class="odoc-spec"><div class="spec module" id="module-Expert" class="anchored"><a href="#module-Expert" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Expert/index.html">Expert</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The <code>Expert</code> module is for building efficient out-of-module <code>Iobuf</code> abstractions.</p></div></div></div></body></html>