<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sys_unix (core_unix.Sys_unix)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">core_unix</a> &#x00BB; Sys_unix</nav><header class="odoc-preamble"><h1>Module <code><span>Sys_unix</span></code></h1><p>System interface.</p></header><nav class="odoc-toc"><ul><li><a href="#optimization">Optimization</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec value" id="val-executable_name" class="anchored"><a href="#val-executable_name" class="anchor"></a><code><span><span class="keyword">val</span> executable_name : string</span></code></div><div class="spec-doc"><p>The name of the file containing the executable currently running.</p></div></div><p>For all of the following functions, <code>?follow_symlinks</code> defaults to <code>true</code>.</p><div class="odoc-spec"><div class="spec value" id="val-file_exists" class="anchored"><a href="#val-file_exists" class="anchor"></a><code><span><span class="keyword">val</span> file_exists : <span>?follow_symlinks:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>[ `Yes <span>| `No</span> <span>| `Unknown</span> ]</span></span></code></div><div class="spec-doc"><p><code>file_exists ~follow_symlinks path</code></p><p>Test whether the file in <code>path</code> exists on the file system. If <code>follow_symlinks</code> is <code>true</code> and <code>path</code> is a symlink the result concerns the target of the symlink.</p><p><code>`Unknown</code> is returned for files for which we cannot successfully determine whether they are on the system or not (e.g. files in directories to which we do not have read permission).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-file_exists_exn" class="anchored"><a href="#val-file_exists_exn" class="anchor"></a><code><span><span class="keyword">val</span> file_exists_exn : <span>?follow_symlinks:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Same as <code>file_exists</code> but blows up on <code>`Unknown</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_directory" class="anchored"><a href="#val-is_directory" class="anchor"></a><code><span><span class="keyword">val</span> is_directory : <span>?follow_symlinks:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>[ `Yes <span>| `No</span> <span>| `Unknown</span> ]</span></span></code></div><div class="spec-doc"><p>Returns <code>`Yes</code> if the file exists and is a directory</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_file" class="anchored"><a href="#val-is_file" class="anchor"></a><code><span><span class="keyword">val</span> is_file : <span>?follow_symlinks:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>[ `Yes <span>| `No</span> <span>| `Unknown</span> ]</span></span></code></div><div class="spec-doc"><p>Returns <code>`Yes</code> if the file exists and is a regular file</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_directory_exn" class="anchored"><a href="#val-is_directory_exn" class="anchor"></a><code><span><span class="keyword">val</span> is_directory_exn : <span>?follow_symlinks:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-is_file_exn" class="anchored"><a href="#val-is_file_exn" class="anchor"></a><code><span><span class="keyword">val</span> is_file_exn : <span>?follow_symlinks:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-remove" class="anchored"><a href="#val-remove" class="anchor"></a><code><span><span class="keyword">val</span> remove : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Remove the given file name from the file system.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rename" class="anchored"><a href="#val-rename" class="anchor"></a><code><span><span class="keyword">val</span> rename : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Rename a file. The first argument is the old name and the second is the new name. If there is already another file under the new name, <code>rename</code> may replace it, or raise an exception, depending on your operating system.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-unsafe_getenv" class="anchored"><a href="#val-unsafe_getenv" class="anchor"></a><code><span><span class="keyword">val</span> unsafe_getenv : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string option</span></span></code></div><div class="spec-doc"><p>Return the value associated to a variable in the process environment.</p><p>Unlike <code>getenv</code>, this function returns the value even if the process has special privileges. It is considered unsafe because the programmer of a setuid or setgid program must be careful to avoid using maliciously crafted environment variables in the search path for executables, the locations for temporary files or logs, and the like.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-unsafe_getenv_exn" class="anchored"><a href="#val-unsafe_getenv_exn" class="anchor"></a><code><span><span class="keyword">val</span> unsafe_getenv_exn : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-command" class="anchored"><a href="#val-command" class="anchor"></a><code><span><span class="keyword">val</span> command : <span>string <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Execute the given shell command and return its exit code.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-command_exn" class="anchored"><a href="#val-command_exn" class="anchor"></a><code><span><span class="keyword">val</span> command_exn : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>command_exn command</code> runs <code>command</code> and then raises an exception if it returns with nonzero exit status.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-chdir" class="anchored"><a href="#val-chdir" class="anchor"></a><code><span><span class="keyword">val</span> chdir : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Change the current working directory of the process.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getcwd" class="anchored"><a href="#val-getcwd" class="anchor"></a><code><span><span class="keyword">val</span> getcwd : <span>unit <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Return the current working directory of the process.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-readdir" class="anchored"><a href="#val-readdir" class="anchor"></a><code><span><span class="keyword">val</span> readdir : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string array</span></span></code></div><div class="spec-doc"><p>Return the names of all files present in the given directory. Names denoting the current directory and the parent directory (<code>&quot;.&quot;</code> and <code>&quot;..&quot;</code> in Unix) are not returned. Each string in the result is a file name rather than a complete path. There is no guarantee that the name strings in the resulting array will appear in any specific order; they are not, in particular, guaranteed to appear in alphabetical order.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fold_dir" class="anchored"><a href="#val-fold_dir" class="anchor"></a><code><span><span class="keyword">val</span> fold_dir : <span>init:<span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span>f:<span>( <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span></span></code></div><div class="spec-doc"><p>Call <code>readdir</code>, and fold over the elements of the array.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Sys_error</span> <p>_ if readdir fails. As with <code>readdir</code>, <code>&quot;.&quot;</code> and <code>&quot;..&quot;</code> are not returned raises the same exception than opendir and closedir.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-ls_dir" class="anchored"><a href="#val-ls_dir" class="anchor"></a><code><span><span class="keyword">val</span> ls_dir : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p>Same as <code>readdir</code>, but return a list rather than an array.</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Break" class="anchored"><a href="#exception-Break" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Break</span></span></code></div><div class="spec-doc"><p>Exception raised on interactive interrupt if <code>Sys</code>.catch_break is on.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-catch_break" class="anchored"><a href="#val-catch_break" class="anchor"></a><code><span><span class="keyword">val</span> catch_break : <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Warning: this function clobbers the Signal.int (SIGINT) handler. SIGINT is the signal that's sent to your program when you hit CTRL-C.</p><p>Warning: catch_break uses deep ocaml runtime magic to raise Sys.Break inside of the main execution context. Consider explicitly handling Signal.int instead. If all you want to do is terminate on CTRL-C you don't have to do any special setup, that's the default behavior.</p><p><code>catch_break</code> governs whether interactive interrupt (ctrl-C) terminates the program or raises the <code>Break</code> exception. Call <code>catch_break true</code> to enable raising <code>Break</code>, and <code>catch_break false</code> to let the system terminate the program on user interrupt.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-execution_mode" class="anchored"><a href="#val-execution_mode" class="anchor"></a><code><span><span class="keyword">val</span> execution_mode : <span>unit <span class="arrow">&#45;&gt;</span></span> <span>[ `Bytecode <span>| `Native</span> ]</span></span></code></div><div class="spec-doc"><p><code>execution_mode</code> tests whether the code being executed was compiled natively or to bytecode.</p></div></div><div class="odoc-spec"><div class="spec value external" id="val-c_int_size" class="anchored"><a href="#val-c_int_size" class="anchor"></a><code><span><span class="keyword">val</span> c_int_size : <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>c_int_size</code> returns the number of bits in a C <code>int</code>, as specified in header files. Note that this can be different from <code>word_size</code> and <code>Nativeint.num_bits</code>. For example, Linux x86-64 should have <code>word_size = 64</code>, but <code>c_int_size () = 32</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-home_directory" class="anchored"><a href="#val-home_directory" class="anchor"></a><code><span><span class="keyword">val</span> home_directory : <span>unit <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Return the home directory, using the <code>HOME</code> environment variable if that is defined, and if not, using the effective user's information in the Unix password database.</p></div></div><h6 id="optimization"><a href="#optimization" class="anchor"></a>Optimization</h6><div class="odoc-spec"><div class="spec value" id="val-override_argv" class="anchored"><a href="#val-override_argv" class="anchor"></a><code><span><span class="keyword">val</span> override_argv : <span><span>string array</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>override_argv new_argv</code> makes subsequent calls to <code>get_argv</code> return <code>new_argv</code>.</p><p>Prior to OCaml version 4.09, this function has two noteworthy behaviors:</p><ul><li>it may raise if the length of <code>new_argv</code> is greater than the length of <code>argv</code> before the call;</li><li>it re-uses and mutates the previous <code>argv</code> value instead of using the new one; and</li><li>it even mutates its length, which can be observed by inspecting the array returned by an earlier call to <code>get_argv</code>.</li></ul></div></div></div></body></html>