<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Linux_ext (core_unix.Linux_ext)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">core_unix</a> &#x00BB; Linux_ext</nav><header class="odoc-preamble"><h1>Module <code><span>Linux_ext</span></code></h1><p>Interface to Linux-specific system calls.</p></header><nav class="odoc-toc"><ul><li><a href="#sysinfo">sysinfo</a></li><li><a href="#filesystem-functions">Filesystem functions</a></li><li><a href="#non-portable-tcp-functionality">Non-portable TCP functionality</a></li><li><a href="#non-portable-socket-functionality">Non-portable socket functionality</a></li><li><a href="#clock-functions">Clock functions</a></li><li><a href="#eventfd-functions">Eventfd functions</a></li><li><a href="#timerfd-functions">Timerfd functions</a></li><li><a href="#parent-death-notifications">Parent death notifications</a></li><li><a href="#task-name">Task name</a></li><li><a href="#pathname-resolution">Pathname resolution</a></li><li><a href="#affinity">Affinity</a></li></ul></nav><div class="odoc-content"><div class="odoc-include"><h3 id="sysinfo"><a href="#sysinfo" class="anchor"></a>sysinfo</h3><div class="odoc-spec"><div class="spec module" id="module-Sysinfo" class="anchored"><a href="#module-Sysinfo" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Sysinfo/index.html">Sysinfo</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="filesystem-functions"><a href="#filesystem-functions" class="anchor"></a>Filesystem functions</h3><div class="odoc-spec"><div class="spec value" id="val-sendfile" class="anchored"><a href="#val-sendfile" class="anchor"></a><code><span><span class="keyword">val</span> sendfile : 
  <span><span>( <span>?pos:int <span class="arrow">&#45;&gt;</span></span>
    <span>?len:int <span class="arrow">&#45;&gt;</span></span>
    <span>fd:<a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span>
    <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span>
    int )</span>
    <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>sendfile ?pos ?len ~fd sock</code> sends mmap-able data from file descriptor <code>fd</code> to socket <code>sock</code> using offset <code>pos</code> and length <code>len</code>. Returns the number of characters actually written.</p><p>NOTE: If the returned value is unequal to what was requested (= the initial size of the data by default), the system call may have been interrupted by a signal, the source file may have been truncated during operation, or a timeout may have occurred on the socket during sending. It is currently impossible to find out which of these events actually happened. Calling <a href="#val-sendfile"><code>sendfile</code></a> several times on the same descriptor that only partially accepted data due to a timeout will eventually lead to the Unix error <code>EAGAIN</code>.</p><p>Raises <code>Unix_error</code> on Unix-errors.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Bound_to_interface" class="anchored"><a href="#module-Bound_to_interface" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Bound_to_interface/index.html">Bound_to_interface</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Type for status of SO_BINDTODEVICE socket option. The socket may either restrict the traffic to a given (by name, e.g. &quot;eth0&quot;) interface, or do no restriction at all.</p></div></div><h3 id="non-portable-tcp-functionality"><a href="#non-portable-tcp-functionality" class="anchor"></a>Non-portable TCP functionality</h3><div class="odoc-spec"><div class="spec type" id="type-tcp_bool_option" class="anchored"><a href="#type-tcp_bool_option" class="anchor"></a><code><span><span class="keyword">type</span> tcp_bool_option</span><span> = </span></code><table><tr id="type-tcp_bool_option.TCP_CORK" class="anchored"><td class="def variant constructor"><a href="#type-tcp_bool_option.TCP_CORK" class="anchor"></a><code><span>| </span><span><span class="constructor">TCP_CORK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>(Since Linux 2.2) If set, don’t send out partial frames. All queued partial frames are sent when the option is cleared again. This is useful for prepending headers before calling <code>sendfile(2)</code>, or for throughput optimization. As currently implemented, there is a 200ms ceiling on the time for which output is corked by TCP_CORK. If this ceiling is reached, queued data is automatically transmitted.</p><p>This option should not be used in code intended to be portable.</p><span class="comment-delim">*)</span></td></tr><tr id="type-tcp_bool_option.TCP_QUICKACK" class="anchored"><td class="def variant constructor"><a href="#type-tcp_bool_option.TCP_QUICKACK" class="anchor"></a><code><span>| </span><span><span class="constructor">TCP_QUICKACK</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>(Since Linux 2.4.4) Quick ack solves an unfortunate interaction between the delayed acks and the Nagle algorithm (TCP_NODELAY). On fast LANs, the Linux TCP stack quickly reaches a CWND (congestion window) of 1 (Linux interprets this as &quot;1 unacknowledged packet&quot;, BSD/Windows and others consider it &quot;1 unacknowledged segment of data&quot;).</p><p>If Linux determines a connection to be bidirectional, it will delay sending acks, hoping to bundle them with other outgoing data. This can lead to serious connection stalls on, say, a TCP market data connection with one second heartbeats. TCP_QUICKACK can be used to prevent entering this delayed ack state.</p><p>This option should not be used in code intended to be portable.</p><span class="comment-delim">*)</span></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-sexp_of_tcp_bool_option" class="anchored"><a href="#val-sexp_of_tcp_bool_option" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_tcp_bool_option : <span><a href="#type-tcp_bool_option">tcp_bool_option</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-tcp_bool_option_of_sexp" class="anchored"><a href="#val-tcp_bool_option_of_sexp" class="anchor"></a><code><span><span class="keyword">val</span> tcp_bool_option_of_sexp : <span><span class="xref-unresolved">Sexplib0</span>.Sexp.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-tcp_bool_option">tcp_bool_option</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bin_shape_tcp_bool_option" class="anchored"><a href="#val-bin_shape_tcp_bool_option" class="anchor"></a><code><span><span class="keyword">val</span> bin_shape_tcp_bool_option : <a href="../../bin_prot/Bin_prot/Shape/index.html#type-t">Bin_prot.Shape.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bin_size_tcp_bool_option" class="anchored"><a href="#val-bin_size_tcp_bool_option" class="anchor"></a><code><span><span class="keyword">val</span> bin_size_tcp_bool_option : <span><a href="#type-tcp_bool_option">tcp_bool_option</a> <a href="../../bin_prot/Bin_prot/Size/index.html#type-sizer">Bin_prot.Size.sizer</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bin_write_tcp_bool_option" class="anchored"><a href="#val-bin_write_tcp_bool_option" class="anchor"></a><code><span><span class="keyword">val</span> bin_write_tcp_bool_option : <span><a href="#type-tcp_bool_option">tcp_bool_option</a> <a href="../../bin_prot/Bin_prot/Write/index.html#type-writer">Bin_prot.Write.writer</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bin_writer_tcp_bool_option" class="anchored"><a href="#val-bin_writer_tcp_bool_option" class="anchor"></a><code><span><span class="keyword">val</span> bin_writer_tcp_bool_option : <span><a href="#type-tcp_bool_option">tcp_bool_option</a> <a href="../../bin_prot/Bin_prot/Type_class/index.html#type-writer">Bin_prot.Type_class.writer</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bin_read_tcp_bool_option" class="anchored"><a href="#val-bin_read_tcp_bool_option" class="anchor"></a><code><span><span class="keyword">val</span> bin_read_tcp_bool_option : <span><a href="#type-tcp_bool_option">tcp_bool_option</a> <a href="../../bin_prot/Bin_prot/Read/index.html#type-reader">Bin_prot.Read.reader</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-__bin_read_tcp_bool_option__" class="anchored"><a href="#val-__bin_read_tcp_bool_option__" class="anchor"></a><code><span><span class="keyword">val</span> __bin_read_tcp_bool_option__ : 
  <span><span>( <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-tcp_bool_option">tcp_bool_option</a> )</span> <a href="../../bin_prot/Bin_prot/Read/index.html#type-reader">Bin_prot.Read.reader</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bin_reader_tcp_bool_option" class="anchored"><a href="#val-bin_reader_tcp_bool_option" class="anchor"></a><code><span><span class="keyword">val</span> bin_reader_tcp_bool_option : <span><a href="#type-tcp_bool_option">tcp_bool_option</a> <a href="../../bin_prot/Bin_prot/Type_class/index.html#type-reader">Bin_prot.Type_class.reader</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bin_tcp_bool_option" class="anchored"><a href="#val-bin_tcp_bool_option" class="anchor"></a><code><span><span class="keyword">val</span> bin_tcp_bool_option : <span><a href="#type-tcp_bool_option">tcp_bool_option</a> <a href="../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-gettcpopt_bool" class="anchored"><a href="#val-gettcpopt_bool" class="anchor"></a><code><span><span class="keyword">val</span> gettcpopt_bool : 
  <span><span>( <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-tcp_bool_option">tcp_bool_option</a> <span class="arrow">&#45;&gt;</span></span> bool )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>gettcpopt_bool sock opt</code> Returns the current value of the boolean TCP socket option <code>opt</code> for socket <code>sock</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-settcpopt_bool" class="anchored"><a href="#val-settcpopt_bool" class="anchor"></a><code><span><span class="keyword">val</span> settcpopt_bool : 
  <span><span>( <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-tcp_bool_option">tcp_bool_option</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> unit )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>settcpopt_bool sock opt v</code> sets the current value of the boolean TCP socket option <code>opt</code> for socket <code>sock</code> to value <code>v</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-send_nonblocking_no_sigpipe" class="anchored"><a href="#val-send_nonblocking_no_sigpipe" class="anchor"></a><code><span><span class="keyword">val</span> send_nonblocking_no_sigpipe : 
  <span><span>( <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span>
    <span>?pos:int <span class="arrow">&#45;&gt;</span></span>
    <span>?len:int <span class="arrow">&#45;&gt;</span></span>
    <span><a href="../../core/Core/Bytes/index.html#type-t">Core.Bytes.t</a> <span class="arrow">&#45;&gt;</span></span>
    <span>int option</span> )</span>
    <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>send_nonblocking_no_sigpipe sock ?pos ?len buf</code> tries to do a nonblocking send on socket <code>sock</code> given buffer <code>buf</code>, offset <code>pos</code> and length <code>len</code>. Prevents <code>SIGPIPE</code>, i.e., raises a Unix-error in that case immediately. Returns <code>Some
      bytes_written</code> or <code>None</code> if the operation would have blocked.</p><p>Raises <code>Invalid_argument</code> if the designated buffer range is invalid. Raises <code>Unix_error</code> on Unix-errors.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-send_no_sigpipe" class="anchored"><a href="#val-send_no_sigpipe" class="anchor"></a><code><span><span class="keyword">val</span> send_no_sigpipe : 
  <span><span>( <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span>
    <span>?pos:int <span class="arrow">&#45;&gt;</span></span>
    <span>?len:int <span class="arrow">&#45;&gt;</span></span>
    <span><a href="../../core/Core/Bytes/index.html#type-t">Core.Bytes.t</a> <span class="arrow">&#45;&gt;</span></span>
    int )</span>
    <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>send_no_sigpipe sock ?pos ?len buf</code> tries to do a blocking send on socket <code>sock</code> given buffer <code>buf</code>, offset <code>pos</code> and length <code>len</code>. Prevents <code>SIGPIPE</code>, i.e., raises a Unix-error in that case immediately. Returns the number of bytes written.</p><p>Raises <code>Invalid_argument</code> if the designated buffer range is invalid. Raises <code>Unix_error</code> on Unix-errors.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sendmsg_nonblocking_no_sigpipe" class="anchored"><a href="#val-sendmsg_nonblocking_no_sigpipe" class="anchor"></a><code><span><span class="keyword">val</span> sendmsg_nonblocking_no_sigpipe : 
  <span><span>( <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span>
    <span>?count:int <span class="arrow">&#45;&gt;</span></span>
    <span><span><span>string <a href="../Core_unix/IOVec/index.html#type-t">Core_unix.IOVec.t</a></span> array</span> <span class="arrow">&#45;&gt;</span></span>
    <span>int option</span> )</span>
    <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>sendmsg_nonblocking_no_sigpipe sock ?count iovecs</code> tries to do a nonblocking send on socket <code>sock</code> using <code>count</code> I/O-vectors <code>iovecs</code>. Prevents <code>SIGPIPE</code>, i.e., raises a Unix-error in that case immediately. Returns <code>Some bytes_written</code> or <code>None</code> if the operation would have blocked.</p><p>Raises <code>Invalid_argument</code> if the designated ranges are invalid. Raises <code>Unix_error</code> on Unix-errors.</p></div></div><h3 id="non-portable-socket-functionality"><a href="#non-portable-socket-functionality" class="anchor"></a>Non-portable socket functionality</h3><div class="odoc-spec"><div class="spec module" id="module-Peer_credentials" class="anchored"><a href="#module-Peer_credentials" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Peer_credentials/index.html">Peer_credentials</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-peer_credentials" class="anchored"><a href="#val-peer_credentials" class="anchor"></a><code><span><span class="keyword">val</span> peer_credentials : 
  <span><span>( <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Peer_credentials/index.html#type-t">Peer_credentials.t</a> )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>peer_credential fd</code> takes a file descriptor of a unix socket. It returns the pid and real ids of the process on the other side, as described in <code>man 7 socket</code> entry for SO_PEERCRED. This is useful in particular in the presence of pid namespace, as the returned pid will be a pid in the current namespace, not the namespace of the other process.</p><p>Raises <code>Unix_error</code> if something goes wrong (file descriptor doesn't satisfy the conditions above, no process on the other side of the socket, etc.).</p></div></div><h3 id="clock-functions"><a href="#clock-functions" class="anchor"></a>Clock functions</h3><div class="odoc-spec"><div class="spec module" id="module-Clock" class="anchored"><a href="#module-Clock" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Clock/index.html">Clock</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="eventfd-functions"><a href="#eventfd-functions" class="anchor"></a>Eventfd functions</h3><div class="odoc-spec"><div class="spec module" id="module-Eventfd" class="anchored"><a href="#module-Eventfd" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Eventfd/index.html">Eventfd</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="timerfd-functions"><a href="#timerfd-functions" class="anchor"></a>Timerfd functions</h3><div class="odoc-spec"><div class="spec module" id="module-Timerfd" class="anchored"><a href="#module-Timerfd" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Timerfd/index.html">Timerfd</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="parent-death-notifications"><a href="#parent-death-notifications" class="anchor"></a>Parent death notifications</h3><div class="odoc-spec"><div class="spec value" id="val-pr_set_pdeathsig" class="anchored"><a href="#val-pr_set_pdeathsig" class="anchor"></a><code><span><span class="keyword">val</span> pr_set_pdeathsig : <span><span>( <span><a href="../../core/Core/Signal/index.html#type-t">Core.Signal.t</a> <span class="arrow">&#45;&gt;</span></span> unit )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>pr_set_pdeathsig s</code> sets the signal <code>s</code> to be sent to the executing process when its parent dies. NOTE: the parent may have died before or while executing this system call. To make sure that you do not miss this event, you should call <code>getppid</code> to get the parent process id after this system call. If the parent has died, the returned parent PID will be 1, i.e., the init process will have adopted the child. You should then either send the signal to yourself using <code>Unix.kill</code>, or execute an appropriate handler.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pr_get_pdeathsig" class="anchored"><a href="#val-pr_get_pdeathsig" class="anchor"></a><code><span><span class="keyword">val</span> pr_get_pdeathsig : <span><span>( <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../../core/Core/Signal/index.html#type-t">Core.Signal.t</a> )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>pr_get_pdeathsig ()</code> gets the signal that will be sent to the currently executing process when its parent dies.</p></div></div><h3 id="task-name"><a href="#task-name" class="anchor"></a>Task name</h3><div class="odoc-spec"><div class="spec value" id="val-pr_set_name_first16" class="anchored"><a href="#val-pr_set_name_first16" class="anchor"></a><code><span><span class="keyword">val</span> pr_set_name_first16 : <span><span>( <span>string <span class="arrow">&#45;&gt;</span></span> unit )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>pr_set_name_first16 name</code> sets the name of the executing thread to <code>name</code>. Only the first 16 bytes in <code>name</code> will be used; the rest is ignored.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pr_get_name" class="anchored"><a href="#val-pr_get_name" class="anchor"></a><code><span><span class="keyword">val</span> pr_get_name : <span><span>( <span>unit <span class="arrow">&#45;&gt;</span></span> string )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>pr_get_name ()</code> gets the name of the executing thread. The name is at most 16 bytes long.</p></div></div><h3 id="pathname-resolution"><a href="#pathname-resolution" class="anchor"></a>Pathname resolution</h3><div class="odoc-spec"><div class="spec value" id="val-file_descr_realpath" class="anchored"><a href="#val-file_descr_realpath" class="anchor"></a><code><span><span class="keyword">val</span> file_descr_realpath : <span><span>( <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span> string )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>file_descr_realpath fd</code> returns the canonicalized absolute pathname of the file associated with file descriptor <code>fd</code>.</p><p>Raises <code>Unix_error</code> on errors.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-out_channel_realpath" class="anchored"><a href="#val-out_channel_realpath" class="anchor"></a><code><span><span class="keyword">val</span> out_channel_realpath : <span><span>( <span><a href="../../stdio/Stdio/Out_channel/index.html#type-t">Core.Out_channel.t</a> <span class="arrow">&#45;&gt;</span></span> string )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>out_channel_realpath oc</code> returns the canonicalized absolute pathname of the file associated with output channel <code>oc</code>.</p><p>Raises <code>Unix_error</code> on errors.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-in_channel_realpath" class="anchored"><a href="#val-in_channel_realpath" class="anchor"></a><code><span><span class="keyword">val</span> in_channel_realpath : <span><span>( <span><a href="../../stdio/Stdio/In_channel/index.html#type-t">Core.In_channel.t</a> <span class="arrow">&#45;&gt;</span></span> string )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>in_channel_realpath ic</code> returns the canonicalized absolute pathname of the file associated with input channel <code>ic</code>.</p><p>Raises <code>Unix_error</code> on errors.</p></div></div><h3 id="affinity"><a href="#affinity" class="anchor"></a>Affinity</h3><div class="odoc-spec"><div class="spec value" id="val-sched_setaffinity" class="anchored"><a href="#val-sched_setaffinity" class="anchor"></a><code><span><span class="keyword">val</span> sched_setaffinity : 
  <span><span>( <span>?pid:<a href="../../core/Core/Pid/index.html#type-t">Core.Pid.t</a> <span class="arrow">&#45;&gt;</span></span> <span>cpuset:<span>int list</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> unit )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p>Setting the CPU affinity causes a process to only run on the cores chosen. You can find out how many cores a system has in /proc/cpuinfo. This can be useful in two ways: first, it limits a process to a core so that it won't interfere with processes on other cores. Second, you save time by not moving the process back and forth between CPUs, which sometimes invalidates their cache. See <code>man sched_setaffinity</code> for details.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sched_getaffinity" class="anchored"><a href="#val-sched_getaffinity" class="anchor"></a><code><span><span class="keyword">val</span> sched_getaffinity : <span><span>( <span>?pid:<a href="../../core/Core/Pid/index.html#type-t">Core.Pid.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span>int list</span> )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sched_setaffinity_this_thread" class="anchored"><a href="#val-sched_setaffinity_this_thread" class="anchor"></a><code><span><span class="keyword">val</span> sched_setaffinity_this_thread : <span><span>( <span>cpuset:<span>int list</span> <span class="arrow">&#45;&gt;</span></span> unit )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-cores" class="anchored"><a href="#val-cores" class="anchor"></a><code><span><span class="keyword">val</span> cores : <span><span>( <span>unit <span class="arrow">&#45;&gt;</span></span> int )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>cores ()</code> returns the number of cores on the machine. This may be different than the number of cores available to the calling process.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cpu_list_of_string_exn" class="anchored"><a href="#val-cpu_list_of_string_exn" class="anchor"></a><code><span><span class="keyword">val</span> cpu_list_of_string_exn : <span>string <span class="arrow">&#45;&gt;</span></span> <span>int list</span></span></code></div><div class="spec-doc"><p>Parse a kernel %*pbl-format CPU list (e.g. <code>1,2,3,10-15</code>) into an <code>int list</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-isolated_cpus" class="anchored"><a href="#val-isolated_cpus" class="anchor"></a><code><span><span class="keyword">val</span> isolated_cpus : <span><span>( <span>unit <span class="arrow">&#45;&gt;</span></span> <span>int list</span> )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>isolated_cpus ()</code> returns the list of cores marked as isolated.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-online_cpus" class="anchored"><a href="#val-online_cpus" class="anchor"></a><code><span><span class="keyword">val</span> online_cpus : <span><span>( <span>unit <span class="arrow">&#45;&gt;</span></span> <span>int list</span> )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>online_cpus ()</code> returns the list of cores online for scheduling.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cpus_local_to_nic" class="anchored"><a href="#val-cpus_local_to_nic" class="anchor"></a><code><span><span class="keyword">val</span> cpus_local_to_nic : <span><span>( <span>ifname:string <span class="arrow">&#45;&gt;</span></span> <span>int list</span> )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>cpus_local_to_nic ~ifname</code> returns the list of cores NUMA-local to <code>ifname</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_terminal_size" class="anchored"><a href="#val-get_terminal_size" class="anchor"></a><code><span><span class="keyword">val</span> get_terminal_size : 
  <span><span>( <span><span>[ `Controlling <span><span>| `Fd</span> of <a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a></span> ]</span> <span class="arrow">&#45;&gt;</span></span>
    int * int )</span>
    <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>get_terminal_size term</code> returns <code>(rows, cols)</code>, the number of rows and columns of the controlling terminal (raises if no controlling terminal), or of the specified file descriptor (useful when writing to stdout, because stdout doesn't have to be the controlling terminal).</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Priority" class="anchored"><a href="#module-Priority" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Priority/index.html">Priority</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>Priority.t</code> is what is usually referred to as the &quot;nice&quot; value of a process. It is also known as the &quot;dynamic&quot; priority. It is used with normal (as opposed to real-time) processes that have static priority zero. See <code>Unix.Scheduler.set</code> for setting the static priority.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-setpriority" class="anchored"><a href="#val-setpriority" class="anchor"></a><code><span><span class="keyword">val</span> setpriority : <span><span>( <span><a href="Priority/index.html#type-t">Priority.t</a> <span class="arrow">&#45;&gt;</span></span> unit )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p>Set the calling thread's priority in the Linux scheduler</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getpriority" class="anchored"><a href="#val-getpriority" class="anchor"></a><code><span><span class="keyword">val</span> getpriority : <span><span>( <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="Priority/index.html#type-t">Priority.t</a> )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p>Get the calling thread's priority in the Linux scheduler</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_ipv4_address_for_interface" class="anchored"><a href="#val-get_ipv4_address_for_interface" class="anchor"></a><code><span><span class="keyword">val</span> get_ipv4_address_for_interface : <span><span>( <span>string <span class="arrow">&#45;&gt;</span></span> string )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>get_ipv4_address_for_interface &quot;eth0&quot;</code> returns the IP address assigned to eth0, or throws an exception if no IP address is configured.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_mac_address" class="anchored"><a href="#val-get_mac_address" class="anchor"></a><code><span><span class="keyword">val</span> get_mac_address : <span><span>( <span>ifname:string <span class="arrow">&#45;&gt;</span></span> string )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>get_mac_address</code> returns the mac address of <code>ifname</code> in the canonical form, e.g. &quot;aa:bb:cc:12:34:56&quot;.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-bind_to_interface" class="anchored"><a href="#val-bind_to_interface" class="anchor"></a><code><span><span class="keyword">val</span> bind_to_interface : 
  <span><span>( <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Bound_to_interface/index.html#type-t">Bound_to_interface.t</a> <span class="arrow">&#45;&gt;</span></span> unit )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div><div class="spec-doc"><p><code>bind_to_interface fd (Only &quot;eth0&quot;)</code> restricts packets from being received/sent on the given file descriptor <code>fd</code> on any interface other than &quot;eth0&quot;. Use <code>bind_to_interface fd Any</code> to allow traffic on any interface. The bindings are not cumulative; you may only select one interface, or <code>Any</code>.</p><p>Not to be confused with a traditional BSD sockets API <code>bind()</code> call, this Linux-specific socket option (<code>SO_BINDTODEVICE</code>) is used for applications on multi-homed machines with specific security concerns. For similar functionality when using multicast, see <code>Core_unix</code>.mcast_set_ifname.</p></div></div><p><code>get_bind_to_interface fd</code> returns the current interface the socket is bound to. It uses getsockopt() with Linux-specific <code>SO_BINDTODEVICE</code> option. Empty string means it is not bound to any specific interface. See <code>man 7 socket</code> for more information.</p><div class="odoc-spec"><div class="spec value" id="val-get_bind_to_interface" class="anchored"><a href="#val-get_bind_to_interface" class="anchor"></a><code><span><span class="keyword">val</span> get_bind_to_interface : 
  <span><span>( <span><a href="../Core_unix/File_descr/index.html#type-t">Core_unix.File_descr.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Bound_to_interface/index.html#type-t">Bound_to_interface.t</a> )</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div></div><p>epoll(): a Linux I/O multiplexer of the same family as select() or poll(). Its main differences are support for Edge- or Level-triggered notifications (we're using Level-triggered to emulate &quot;select&quot;) and much better scaling with the number of file descriptors.</p><p>See the man pages for a full description of the epoll facility.</p><div class="odoc-spec"><div class="spec module" id="module-Epoll" class="anchored"><a href="#module-Epoll" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Epoll/index.html">Epoll</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Extended_file_attributes" class="anchored"><a href="#module-Extended_file_attributes" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Extended_file_attributes/index.html">Extended_file_attributes</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Extended attributes are name:value pairs associated with inodes (files, directories, symlinks, etc). They are extensions to the normal attributes which are associated with all inodes in the system (i.e. the 'man 2 stat' data). A complete overview of extended attributes concepts can be found in 'man 5 attr'.</p></div></div></div></div></body></html>