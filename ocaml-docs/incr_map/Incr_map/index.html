<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Incr_map (incr_map.Incr_map)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">incr_map</a> &#x00BB; Incr_map</nav><header class="odoc-preamble"><h1>Module <code><span>Incr_map</span></code></h1></header><div class="odoc-content"><div class="odoc-include"><div class="odoc-spec"><div class="spec value" id="val-of_set" class="anchored"><a href="#val-of_set" class="anchor"></a><code><span><span class="keyword">val</span> of_set : 
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Set/index.html#type-t">Core.Set.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, unit, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-filter_mapi" class="anchored"><a href="#val-filter_mapi" class="anchor"></a><code><span><span class="keyword">val</span> filter_mapi : 
  <span>?data_equal:<span>( <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v1</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v2</span> option</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v2</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mapi" class="anchored"><a href="#val-mapi" class="anchor"></a><code><span><span class="keyword">val</span> mapi : 
  <span>?data_equal:<span>( <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v1</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'v2</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v2</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-filter_map" class="anchored"><a href="#val-filter_map" class="anchor"></a><code><span><span class="keyword">val</span> filter_map : 
  <span>?data_equal:<span>( <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v1</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v2</span> option</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v2</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-map" class="anchored"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : 
  <span>?data_equal:<span>( <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v1</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'v2</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v2</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-filter_mapi'" class="anchored"><a href="#val-filter_mapi'" class="anchor"></a><code><span><span class="keyword">val</span> filter_mapi' : 
  <span>?cutoff:<span><span class="type-var">'v1</span> <a href="../../incremental/Incremental/Cutoff/index.html#type-t">Incremental.Cutoff.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?data_equal:<span>( <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v1</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:
    <span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span>
      <span>data:<span><span>( <span class="type-var">'v1</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
      <span><span>( <span><span class="type-var">'v2</span> option</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v2</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-map'" class="anchored"><a href="#val-map'" class="anchor"></a><code><span><span class="keyword">val</span> map' : 
  <span>?cutoff:<span><span class="type-var">'v1</span> <a href="../../incremental/Incremental/Cutoff/index.html#type-t">Incremental.Cutoff.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?data_equal:<span>( <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v1</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span><span><span>( <span class="type-var">'v1</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'v2</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v2</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-filter_map'" class="anchored"><a href="#val-filter_map'" class="anchor"></a><code><span><span class="keyword">val</span> filter_map' : 
  <span>?cutoff:<span><span class="type-var">'v1</span> <a href="../../incremental/Incremental/Cutoff/index.html#type-t">Incremental.Cutoff.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?data_equal:<span>( <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v1</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span><span><span>( <span class="type-var">'v1</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'v2</span> option</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v2</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mapi'" class="anchored"><a href="#val-mapi'" class="anchor"></a><code><span><span class="keyword">val</span> mapi' : 
  <span>?cutoff:<span><span class="type-var">'v1</span> <a href="../../incremental/Incremental/Cutoff/index.html#type-t">Incremental.Cutoff.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?data_equal:<span>( <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v1</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span><span>( <span class="type-var">'v1</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'v2</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v2</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-partition_mapi" class="anchored"><a href="#val-partition_mapi" class="anchor"></a><code><span><span class="keyword">val</span> partition_mapi : 
  <span>?data_equal:<span>( <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v1</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'v2</span>, <span class="type-var">'v3</span> )</span> <a href="../../core/Core/Either/index.html#type-t">Core.Either.t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v2</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span> * <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v3</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span>
    <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-unordered_fold" class="anchored"><a href="#val-unordered_fold" class="anchor"></a><code><span><span class="keyword">val</span> unordered_fold : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?update:<span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span>old_data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span>new_data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?specialized_initial:<span>( <span>init:<span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?revert_to_init_when_empty:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>init:<span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span>
  <span>add:<span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>remove:<span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'acc</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p><code>unordered_fold i ~init ~add ~remove</code> constructs a more incremental version of:</p><pre><code>let%map m = i in
Map.fold m ~init ~f:add</code></pre><p>assuming that <code>remove</code> is the inverse of <code>add</code>, and that the operations for different keys can be performed in any order. Note that <code>data_equal</code> defaults to <code>phys_equal</code>, but a more precise equality can be provided instead.</p><p>When the data for a key updates, by default <code>remove</code> is called on the old data and then <code>add</code> is called on the new data. <code>update</code> provides an alternative single function to call each time a key's data updates, and can be used to improve efficiency.</p><p>For the initial computation, by default <code>add</code> is called on all the elements in the map. As this can be inefficient, <code>specialized_initial</code> can be provided to perform the computation in a more effective way.</p><p>If <code>revert_to_init_when_empty</code> is true, then if the input map transitions from being full to empty, then instead of calling <code>remove</code> on every kv-pair, it will instead just set the output to whatever you've passed as <code>init</code>. The default value of <code>revert_to_init_when_empty</code> is <code>false</code>, so this optimization does not apply automatically.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mapi_count" class="anchored"><a href="#val-mapi_count" class="anchor"></a><code><span><span class="keyword">val</span> mapi_count : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k1</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp1</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'k2</span>, <span class="type-var">'cmp2</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span>key:<span class="type-var">'k1</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'k2</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k2</span>, int, <span class="type-var">'cmp2</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>Given an input map and a function mapping a kv-pair to a new value, <code>mapi_count</code> will compute a multi-set keyed on that new value.</p><p>Any value that would otherwise have a count of &quot;0&quot; is instead removed from the map.</p><p>It is assumed that <code>f</code> is quite fast as the function will be called more often than strictly necessary, but it does this in order to avoid allocating an extra map. If <code>f</code> is very slow and you don't mind the extra allocations, use <code>Incr_map.index_byi</code> composed with <code>Incr_map.map ~f:Map.length</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-map_count" class="anchored"><a href="#val-map_count" class="anchor"></a><code><span><span class="keyword">val</span> map_count : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k1</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp1</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'k2</span>, <span class="type-var">'cmp2</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'k2</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k2</span>, int, <span class="type-var">'cmp2</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>The same as <code>mapi_count</code> but the <code>f</code> function only gets to see the data instead of both the key and the data.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mapi_min" class="anchored"><a href="#val-mapi_min" class="anchor"></a><code><span><span class="keyword">val</span> mapi_min : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'r</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'r</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'r</span> option</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>Computes the smallest <code>r</code> where <code>r</code> is computed for each kv-pair in the input map.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mapi_max" class="anchored"><a href="#val-mapi_max" class="anchor"></a><code><span><span class="keyword">val</span> mapi_max : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'r</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'r</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'r</span> option</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>Computes the largest <code>r</code> where <code>r</code> is computed for each kv-pair in the input map.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mapi_mn" class="anchored"><a href="#val-mapi_mn" class="anchor"></a><code><span><span class="keyword">val</span> mapi_mn : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'r</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'r</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'r</span> option</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>Computes the smallest <code>r</code> where <code>r</code> is computed for each kv-pair in the input map.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-map_max" class="anchored"><a href="#val-map_max" class="anchor"></a><code><span><span class="keyword">val</span> map_max : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'r</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'r</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'r</span> option</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>Computes the largest <code>r</code> where <code>r</code> is computed for each kv-pair in the input map.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-min_value" class="anchored"><a href="#val-min_value" class="anchor"></a><code><span><span class="keyword">val</span> min_value : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'v</span> option</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>Computes the smallest data value from the input map.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-max_value" class="anchored"><a href="#val-max_value" class="anchor"></a><code><span><span class="keyword">val</span> max_value : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'v</span> option</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>Computes the largest data value from the input map.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mapi_bounds" class="anchored"><a href="#val-mapi_bounds" class="anchor"></a><code><span><span class="keyword">val</span> mapi_bounds : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'r</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'r</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>(<span class="type-var">'r</span> * <span class="type-var">'r</span>)</span> option</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>Computes <code>min * max</code> where the value is computed for each kv-pair in the input map</p></div></div><div class="odoc-spec"><div class="spec value" id="val-map_bounds" class="anchored"><a href="#val-map_bounds" class="anchor"></a><code><span><span class="keyword">val</span> map_bounds : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'r</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'r</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>(<span class="type-var">'r</span> * <span class="type-var">'r</span>)</span> option</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>Computes <code>min * max</code> where the value is computed for each kv-pair in the input map</p></div></div><div class="odoc-spec"><div class="spec value" id="val-value_bounds" class="anchored"><a href="#val-value_bounds" class="anchor"></a><code><span><span class="keyword">val</span> value_bounds : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>(<span class="type-var">'v</span> * <span class="type-var">'v</span>)</span> option</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>Computes the smallest and largest data value from the input map.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-merge" class="anchored"><a href="#val-merge" class="anchor"></a><code><span><span class="keyword">val</span> merge : 
  <span>?data_equal_left:<span>( <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?data_equal_right:<span>( <span><span class="type-var">'v2</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v2</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v1</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v2</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'v1</span>, <span class="type-var">'v2</span> )</span> <a href="../../core/Core/Map/Merge_element/index.html#type-t">Core.Map.Merge_element.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v3</span> option</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v3</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>Like <code>merge</code> in <code>Base.Map.merge</code>. Note that <code>f</code> is called at most once per key in any given stabilization.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-merge'" class="anchored"><a href="#val-merge'" class="anchor"></a><code><span><span class="keyword">val</span> merge' : 
  <span>?cutoff:<span><span><span>( <span class="type-var">'v1</span>, <span class="type-var">'v2</span> )</span> <a href="../../core/Core/Map/Merge_element/index.html#type-t">Core.Map.Merge_element.t</a></span> <a href="../../incremental/Incremental/Cutoff/index.html#type-t">Incremental.Cutoff.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?data_equal_left:<span>( <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?data_equal_right:<span>( <span><span class="type-var">'v2</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v2</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v1</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v2</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:
    <span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span><span>( <span><span>( <span class="type-var">'v1</span>, <span class="type-var">'v2</span> )</span> <a href="../../core/Core/Map/Merge_element/index.html#type-t">Core.Map.Merge_element.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
      <span><span>( <span><span class="type-var">'v3</span> option</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v3</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>Like <code>merge</code>, but operating using incremental nodes. This is a good use case for <code>ppx_pattern_bind</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-unzip" class="anchored"><a href="#val-unzip" class="anchor"></a><code><span><span class="keyword">val</span> unzip : 
  <span>?left_result_equal:<span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?right_result_equal:<span>( <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'a</span> * <span class="type-var">'b</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'a</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span>
  * <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'b</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-unzip_mapi" class="anchored"><a href="#val-unzip_mapi" class="anchor"></a><code><span><span class="keyword">val</span> unzip_mapi : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?left_result_equal:<span>( <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v1</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?right_result_equal:<span>( <span><span class="type-var">'v2</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v2</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'v1</span> * <span class="type-var">'v2</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v1</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span>
  * <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v2</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p><code>unzip_mapi</code> is similar to <code>List.unzip</code>, but for incremental maps. Note that <code>f</code> may be called multiple times on a single element.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-unzip_mapi'" class="anchored"><a href="#val-unzip_mapi'" class="anchor"></a><code><span><span class="keyword">val</span> unzip_mapi' : 
  <span>?cutoff:<span><span class="type-var">'v</span> <a href="../../incremental/Incremental/Cutoff/index.html#type-t">Incremental.Cutoff.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:
    <span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span>
      <span>data:<span><span>( <span class="type-var">'v</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
      <span><span>( <span class="type-var">'v1</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> * <span><span>( <span class="type-var">'v2</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v1</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span>
  * <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v2</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p><code>unzip_mapi'</code> is like <code>unzip_mapi</code>, but allows you to define the mapping from the input map's elements to the output maps' elements incrementally.</p><p>The naive implementation (see below) produces worse Incremental graphs.</p><pre><code>let temp =
  Incr_map.mapi' input ~f:(fun ~key ~data -&gt;
    f ~key ~data |&gt; Tuple2.uncurry Incr.both)
in
let left = Incr_map.map temp ~f:Tuple2.get1 in
let right = Incr_map.map temp ~f:Tuple2.get2 in
left, right</code></pre></div></div><div class="odoc-spec"><div class="spec value" id="val-flatten" class="anchored"><a href="#val-flatten" class="anchor"></a><code><span><span class="keyword">val</span> flatten : 
  <span><span><span class="type-var">'w</span> <a href="../../incremental/Incremental/State/index.html#type-t">Incremental.State.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'k</span>, <span><span>( <span class="type-var">'v</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>This is the &quot;easy&quot; version of <code>join</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-join" class="anchored"><a href="#val-join" class="anchor"></a><code><span><span class="keyword">val</span> join : 
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span><span>( <span class="type-var">'v</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>The non-incremental semantics of this function is the identity function. Its purpose is to collapse the extra level of incrementality at the level of the data of the map.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-separate" class="anchored"><a href="#val-separate" class="anchor"></a><code><span><span class="keyword">val</span> separate : 
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span><span>( <span class="type-var">'v</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-keys" class="anchored"><a href="#val-keys" class="anchor"></a><code><span><span class="keyword">val</span> keys : 
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'c</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'c</span> )</span> <a href="../../core/Core/Set/index.html#type-t">Core.Set.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-rank" class="anchored"><a href="#val-rank" class="anchor"></a><code><span><span class="keyword">val</span> rank : 
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span> )</span> <a href="../../base/Base/Map/index.html#type-t">Base.Map.t</a></span>, <span class="type-var">'state_witness</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'k</span>, <span class="type-var">'state_witness</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span>int option</span>, <span class="type-var">'state_witness</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>Computes the <code>rank</code> of a key (given incrementally) inside of a map (also incremental). The traditional <code>Map.rank</code> function is O(n), and this incremental rank function has the following performance characteristics:</p><p>definitions: n : the size of the map r : the time to compute <code>Map.symmetric_diff</code> between the two maps k : the change in rank of the key between two stabilizations</p><p>note that <code>r</code> and <code>k</code> are _much_ smaller than <code>n</code> for most practical purposes</p><ul><li>O(log n) when the key is not in the map. This takes precedence over other every other scenario.</li><li>O(n) on the initial stabilization</li><li>O(n) when the key transitions from not being in the map to being in the map</li><li>O(log n + r) when the map changes</li><li>O(log n + k) when the key changes</li><li>O(log n + r + k) when both key and map change</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-subrange" class="anchored"><a href="#val-subrange" class="anchor"></a><code><span><span class="keyword">val</span> subrange : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>(<span><span class="type-var">'k</span> <a href="../../core/Core/Maybe_bound/As_lower_bound/index.html#type-t">Core.Maybe_bound.As_lower_bound.t</a></span>
     * <span><span class="type-var">'k</span> <a href="../../core/Core/Maybe_bound/As_upper_bound/index.html#type-t">Core.Maybe_bound.As_upper_bound.t</a></span>)</span>
      option</span>,
    <span class="type-var">'w</span> )</span>
    <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p><code>subrange map (min, max)</code> constructs an incremental submap that includes all of the keys and data from <code>map</code> between <code>min</code> and <code>max</code>, and none of the keys outside the range.</p><p><code>subrange map None</code> is the empty map. <code>range</code> being <code>None</code> means no elements are chosen.</p><p>Note that incremental changes have a runtime of O((k + m) log n) where k is the size of the changes to the underlying map and m is the size of the changes to the elements contained by the range. The complexity of the initial computation is the same as the incremental computation, with some simplification. k = 0 because we have not made any changes to the underlying map yet, and m equals the size of the range, because the initial range is empty.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-subrange_by_rank" class="anchored"><a href="#val-subrange_by_rank" class="anchor"></a><code><span><span class="keyword">val</span> subrange_by_rank : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span>int <a href="../../core/Core/Maybe_bound/As_lower_bound/index.html#type-t">Core.Maybe_bound.As_lower_bound.t</a></span>
    * <span>int <a href="../../core/Core/Maybe_bound/As_upper_bound/index.html#type-t">Core.Maybe_bound.As_upper_bound.t</a></span>,
    <span class="type-var">'w</span> )</span>
    <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p><code>subrange_by_rank map (s, e)</code> constructs an incremental submap that includes (e-s+1) keys between s-th and e-th, inclusive.</p><p>If s is greater or equal to map length, the result is empty. If e is greater or equal to map length, the result contains keys from s-th to the last one.</p><p>Raises for invalid indices - s &lt; 0 or e &lt; s.</p><p>Runtime of the initial computation is O(min(e, n-s) + log(n)), i.e. linear, but optimized for ranges close to beginning or end.</p><p>Runtime of the incremental computation is O(log(n) + k + (m+m') * log(n)) where:</p><ul><li>k is the size of the diff</li><li>m is the total impact of map changes on the range, bounded by k (e.g. if we add 1001 keys and remove 1000 below s, then m = 1)</li><li>m' = O( |new s - old s| + |new e - old e| ).</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-rekey" class="anchored"><a href="#val-rekey" class="anchor"></a><code><span><span class="keyword">val</span> rekey : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k1</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp1</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'k2</span>, <span class="type-var">'cmp2</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span>key:<span class="type-var">'k1</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'k2</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k2</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp2</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p><code>rekey</code> transforms a map by modifying the type of the key. The user is responsible for ensuring that <code>f</code> doesn't return the same output key for multiple input keys.</p><p>This function assumes <code>f</code> is cheap to compute and accordingly may call it multiple times.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-index_byi" class="anchored"><a href="#val-index_byi" class="anchor"></a><code><span><span class="keyword">val</span> index_byi : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'inner_key</span>, <span class="type-var">'v</span>, <span class="type-var">'inner_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'outer_key</span>, <span class="type-var">'outer_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>index:<span>( <span>key:<span class="type-var">'inner_key</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'outer_key</span> option</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'outer_key</span>, <span><span>( <span class="type-var">'inner_key</span>, <span class="type-var">'v</span>, <span class="type-var">'inner_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'outer_cmp</span> )</span>
      <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>,
    <span class="type-var">'w</span> )</span>
    <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p><code>index_byi map ~comparator ~index</code> constructs an incremental map-of-maps where each key-data pair of the input map is present in one (or none) of the inner maps. <code>index</code> specifies the outer map key under which each original key-data pair is found.</p><p>All of the resulting inner maps are guaranteed to be non-empty; if the inner map would otherwise be empty, then the key for that map is instead removed from the outer map.</p><p>An all-at-once version of <code>index_by</code> would look like:</p><pre><code>let index_byi map ~comparator ~index =
  Map.to_alist map
  |&gt; List.filter_map ~f:(fun (key, data) -&gt;
    match index ~key ~data with
    | None -&gt; None
    | Some index -&gt; Some (index, (key, data)))
  |&gt; Map.of_alist_multi comparator
  |&gt; Map.map ~f:(Map.of_alist_exn (Map.comparator_s map))
;;</code></pre></div></div><div class="odoc-spec"><div class="spec value" id="val-index_by" class="anchored"><a href="#val-index_by" class="anchor"></a><code><span><span class="keyword">val</span> index_by : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'inner_key</span>, <span class="type-var">'v</span>, <span class="type-var">'inner_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'outer_key</span>, <span class="type-var">'outer_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>index:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'outer_key</span> option</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'outer_key</span>, <span><span>( <span class="type-var">'inner_key</span>, <span class="type-var">'v</span>, <span class="type-var">'inner_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'outer_cmp</span> )</span>
      <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>,
    <span class="type-var">'w</span> )</span>
    <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p><code>index_by map ~comparator ~index</code> is like <code>index_by map ~comparator ~index</code>, but the <code>index</code> function does not take the inner map's <code>key</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-unordered_fold_nested_maps" class="anchored"><a href="#val-unordered_fold_nested_maps" class="anchor"></a><code><span><span class="keyword">val</span> unordered_fold_nested_maps : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?revert_to_init_when_empty:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?update:
    <span>( <span>outer_key:<span class="type-var">'outer_key</span> <span class="arrow">&#45;&gt;</span></span>
      <span>inner_key:<span class="type-var">'inner_key</span> <span class="arrow">&#45;&gt;</span></span>
      <span>old_data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span>
      <span>new_data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span>
      <span class="type-var">'acc</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'outer_key</span>, <span><span>( <span class="type-var">'inner_key</span>, <span class="type-var">'v</span>, <span class="type-var">'inner_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'outer_cmp</span> )</span>
      <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>,
    <span class="type-var">'w</span> )</span>
    <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>init:<span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span>
  <span>add:
    <span>( <span>outer_key:<span class="type-var">'outer_key</span> <span class="arrow">&#45;&gt;</span></span> <span>inner_key:<span class="type-var">'inner_key</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>remove:
    <span>( <span>outer_key:<span class="type-var">'outer_key</span> <span class="arrow">&#45;&gt;</span></span> <span>inner_key:<span class="type-var">'inner_key</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'acc</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-transpose" class="anchored"><a href="#val-transpose" class="anchor"></a><code><span><span class="keyword">val</span> transpose : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'k2</span>, <span class="type-var">'k2_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k1</span>, <span><span>( <span class="type-var">'k2</span>, <span class="type-var">'v</span>, <span class="type-var">'k2_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'k1_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span>
    <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'k2</span>, <span><span>( <span class="type-var">'k1</span>, <span class="type-var">'v</span>, <span class="type-var">'k1_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'k2_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span>
    <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p><code>transpose</code> flips the order of a doubly nested incremental map.</p><p>All inner map instances will have at least one element.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-collapse" class="anchored"><a href="#val-collapse" class="anchor"></a><code><span><span class="keyword">val</span> collapse : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'outer_key</span>, <span><span>( <span class="type-var">'inner_key</span>, <span class="type-var">'v</span>, <span class="type-var">'inner_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'outer_cmp</span> )</span>
      <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>,
    <span class="type-var">'w</span> )</span>
    <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'inner_key</span>, <span class="type-var">'inner_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'outer_key</span> * <span class="type-var">'inner_key</span>,
      <span class="type-var">'v</span>,
      <span><span>( <span class="type-var">'outer_cmp</span>, <span class="type-var">'inner_cmp</span> )</span> <a href="../../core/Core/Tuple/T2/index.html#type-comparator_witness">Core.Tuple2.comparator_witness</a></span> )</span>
      <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>,
    <span class="type-var">'w</span> )</span>
    <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-collapse_by" class="anchored"><a href="#val-collapse_by" class="anchor"></a><code><span><span class="keyword">val</span> collapse_by : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'outer_key</span>, <span><span>( <span class="type-var">'inner_key</span>, <span class="type-var">'v</span>, <span class="type-var">'inner_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'outer_cmp</span> )</span>
      <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>,
    <span class="type-var">'w</span> )</span>
    <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>merge_keys:<span>( <span><span class="type-var">'outer_key</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'inner_key</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'combined_key</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'combined_key</span>, <span class="type-var">'combined_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'combined_key</span>, <span class="type-var">'v</span>, <span class="type-var">'combined_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p><code>collapse_by</code> is similar to <code>collapse</code>, but it allows the user to choose how to combine the two keys from the outer and inner maps. This does mean that it's the responsibility of the implementor of the <code>merge_keys</code> function to uphold this invariant:</p><p>&gt; a merged-key being equal to another merged-key implies that the &gt; outer-keys and inner-keys which were used to build the merged keys also &gt; compare to be equal to one another</p><p>The <code>~comparator</code> argument the first-class module of the output key, it usually looks like this: <code> ~comparator:(module Combined_key) </code> but make sure that the module implements the <code>Comparator.S</code> signature.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-expand" class="anchored"><a href="#val-expand" class="anchor"></a><code><span><span class="keyword">val</span> expand : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'outer_key</span> * <span class="type-var">'inner_key</span>, <span class="type-var">'v</span>, <span class="type-var">'tuple_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>outer_comparator:<span><span>( <span class="type-var">'outer_key</span>, <span class="type-var">'outer_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>inner_comparator:<span><span>( <span class="type-var">'inner_key</span>, <span class="type-var">'inner_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-comparator">Core.Map.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'outer_key</span>, <span><span>( <span class="type-var">'inner_key</span>, <span class="type-var">'v</span>, <span class="type-var">'inner_cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'outer_cmp</span> )</span>
      <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>,
    <span class="type-var">'w</span> )</span>
    <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>Convert a map with tuples for keys into a nested map. This operation is roughly the inverse of <code>collapse</code>, though if there are outer keys in the uncollapsed map that correspond to empty inner maps, the outer keys will be dropped from the expanded map.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-counti" class="anchored"><a href="#val-counti" class="anchor"></a><code><span><span class="keyword">val</span> counti : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( int, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-count" class="anchored"><a href="#val-count" class="anchor"></a><code><span><span class="keyword">val</span> count : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">_</span>, <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( int, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-for_alli" class="anchored"><a href="#val-for_alli" class="anchor"></a><code><span><span class="keyword">val</span> for_alli : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( bool, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-for_all" class="anchored"><a href="#val-for_all" class="anchor"></a><code><span><span class="keyword">val</span> for_all : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">_</span>, <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( bool, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-existsi" class="anchored"><a href="#val-existsi" class="anchor"></a><code><span><span class="keyword">val</span> existsi : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span>data:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( bool, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-exists" class="anchored"><a href="#val-exists" class="anchor"></a><code><span><span class="keyword">val</span> exists : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">_</span>, <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( bool, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sum" class="anchored"><a href="#val-sum" class="anchor"></a><code><span><span class="keyword">val</span> sum : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">_</span>, <span class="type-var">'v</span>, <span class="type-var">_</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="keyword">module</span> <a href="../../abstract_algebra/Abstract_algebra/Commutative_group/module-type-Without_sexp/index.html">Abstract_algebra.Commutative_group.Without_sexp</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../abstract_algebra/Abstract_algebra/Commutative_group/module-type-Without_sexp/index.html#type-t">t</a> = <span class="type-var">'u</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'u</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'u</span>, <span class="type-var">'w</span> )</span> <a href="../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>Incrementally compute the sum of all of the values in the map.</p><p>Beware of float's negative infinities. They aren't commutative and will misbehave here.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Lookup" class="anchored"><a href="#module-Lookup" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Lookup/index.html">Lookup</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>('k, 'v) Lookup.t</code> provides a way to lookup keys in a map which uses symmetric diffs to trigger updates of the lookups.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-For_testing" class="anchored"><a href="#module-For_testing" class="anchor"></a><code><span><span class="keyword">module</span> <a href="For_testing/index.html">For_testing</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module-type" id="module-type-S_gen" class="anchored"><a href="#module-type-S_gen" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S_gen/index.html">S_gen</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module-type" id="module-type-S" class="anchored"><a href="#module-type-S" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S/index.html">S</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Make" class="anchored"><a href="#module-Make" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Make/index.html">Make</a></span><span>
  (<a href="Make/argument-1-Incr/index.html">Incr</a> : <a href="../../incremental/Incremental/module-type-S/index.html">Incremental.S</a>) : 
  <a href="module-type-S/index.html">S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="module-type-S/index.html#type-state_witness">state_witness</a> := <a href="Make/argument-1-Incr/index.html#type-state_witness">Incr.state_witness</a></span> <span class="keyword">and</span> <span><span class="keyword">module</span> <a href="module-type-S/Incr/index.html">Incr</a> := <a href="Make/argument-1-Incr/index.html">Incr</a></span></span></code></div></div></div></div></body></html>