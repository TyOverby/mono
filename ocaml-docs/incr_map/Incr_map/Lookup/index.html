<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lookup (incr_map.Incr_map.Lookup)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">incr_map</a> &#x00BB; <a href="../index.html">Incr_map</a> &#x00BB; Lookup</nav><header class="odoc-preamble"><h1>Module <code><span>Incr_map.Lookup</span></code></h1><p><code>('k, 'v) Lookup.t</code> provides a way to lookup keys in a map which uses symmetric diffs to trigger updates of the lookups.</p><p>The complexity of an update depends on:</p><ul><li><code>n</code>: the number of keys in the larger of the old/updated input map</li><li><code>k</code>: the number of lookup nodes created using <code>find</code></li><li><code>m</code>: the number of elements in the symdiff of the maps</li><li><code>symdiff(n)</code>: the cost of performing the symdiff on the map (m &lt;= symdiff(n) &lt;= n)</li></ul><p>Each update should cost <code>O(symdiff(n) + m * log k)</code>, so this will be efficient when there are a lot of lookups (close to n) into a map which can be efficiently symdiffed (and therefore has a small number of changes also). The cost of updating when performing the same lookups by means of <code>Incr.map ~f:(fun m -&gt; Map.find m key)</code> is <code>O(k * log n)</code>.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>('k, 'v, 'cmp, 'w) t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : 
  <span>?data_equal:<span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span> )</span> <a href="../../../core/Core/Map/index.html#type-t">Core.Map.t</a></span>, <span class="type-var">'w</span> )</span> <a href="../../../incremental/Incremental/index.html#type-t">Incremental.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>comparator:<span><span>( <span class="type-var">'k</span>, <span class="type-var">'cmp</span> )</span> <a href="../../../core/Core/Comparator/index.html#type-t">Core.Comparator.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span>, <span class="type-var">'w</span> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Create the lookup structure on an incremental map.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-find" class="anchored"><a href="#val-find" class="anchor"></a><code><span><span class="keyword">val</span> find : <span><span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">_</span>, <span class="type-var">'w</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'v</span> option</span>, <span class="type-var">'w</span> )</span> <a href="../../../incremental/Incremental/index.html#type-t">Incremental.t</a></span></span></code></div><div class="spec-doc"><p>Create a node which performs <code>Map.find</code> on the input map.</p><p><code>find (create incr_map) key</code> should be equivalent to <code>Incr.map ~f:(fun m -&gt;
        Map.find m key) incr_map</code>, but when you call <code>find</code> many times for a single <code>create</code> the nodes should update more efficiently in stabilisation when <code>incr_map</code> changes in a way which can be efficiently diffed.</p><p>This will re-use existing nodes when it can, but will not always do so.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-M" class="anchored"><a href="#module-M" class="anchor"></a><code><span><span class="keyword">module</span> <a href="M/index.html">M</a></span><span> (<a href="M/argument-1-K/index.html">K</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A convenient way to refer to the type for a given key.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-For_debug" class="anchored"><a href="#module-For_debug" class="anchor"></a><code><span><span class="keyword">module</span> <a href="For_debug/index.html">For_debug</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>