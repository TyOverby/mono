<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Record_builder (profunctor.Profunctor.Record_builder)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">profunctor</a> &#x00BB; <a href="../index.html">Profunctor</a> &#x00BB; Record_builder</nav><header class="odoc-preamble"><h1>Module type <code><span>Profunctor.Record_builder</span></code></h1><p>A module used to traverse each field of a record performing some action using a specific profunctor.</p><p>You can construct a record builder for a given profunctor using <a href="../Record_builder/index.html">Record_builder</a>.</p><p>This is based on the library <a href="../Record_builder/index.html"><code>Record_builder</code></a> (which provides traversal with an <a href="../../../base/Base/Applicative/module-type-S/index.html">applicative</a>) and adds the contravariant mapping of each field.</p><pre><code>type t = {
  name : string;
  age : int;
} [@@deriving fields]

module F : Profunctor.S = &quot;your module here&quot;
module F_of_record = Profunctor.Record_builder(F)

let for_string : (string, string) F.t = &quot;your code here&quot;
let for_int : (int, int) F.t = &quot;your code here&quot;

let example : (t, t) F.t =
  F_of_record.(build_for_record (
    Fields.make_creator
      ~name:(field for_string)
      ~age:(field for_int)))</code></pre><p>This is equivalent to:</p><pre><code>let example : (t, t) F.t =
  let name = F.contra_map ~f:name for_string
  and age = F.contra_map ~f:age for_int
  in
  F.map (F.both name age) ~f:(fun (name, age) -&gt;
    { name; age; })
;;</code></pre></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-profunctor" class="anchored"><a href="#type-profunctor" class="anchor"></a><code><span><span class="keyword">type</span> <span>('b, 'a) profunctor</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-profunctor_term" class="anchored"><a href="#type-profunctor_term" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a profunctor_term</span></span></code></div><div class="spec-doc"><p>A term of the profunctor where the input and output type are the same.</p><p>Although this module must use the type parameters separately internally all terms supplied as arguments or returned will have both type parameters equal. This type alias is used to allow automatically converting with some other type in some cases e.g. <a href="../Of_conv_based/index.html"><code>Of_conv_based</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-prj" class="anchored"><a href="#val-prj" class="anchor"></a><code><span><span class="keyword">val</span> prj : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'a</span> )</span> <a href="#type-profunctor">profunctor</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-profunctor_term">profunctor_term</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-inj" class="anchored"><a href="#val-inj" class="anchor"></a><code><span><span class="keyword">val</span> inj : <span><span><span class="type-var">'a</span> <a href="#type-profunctor_term">profunctor_term</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'a</span>, <span class="type-var">'a</span> )</span> <a href="#type-profunctor">profunctor</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Bare" class="anchored"><a href="#module-Bare" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Bare/index.html">Bare</a></span><span> : 
  <a href="../../../record_builder/Record_builder/module-type-S2/index.html">Record_builder.S2</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>('b, 'a) <a href="../../../record_builder/Record_builder/module-type-S2/index.html#type-applicative">applicative</a></span> = <span><span>( <span class="type-var">'b</span>, <span class="type-var">'a</span> )</span> <a href="#type-profunctor">profunctor</a></span></span></span></code></div><div class="spec-doc"><p>The underlying applicative record builder, which does not perform the contravariant mapping.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-field" class="anchored"><a href="#val-field" class="anchor"></a><code><span><span class="keyword">val</span> field : 
  <span><span><span class="type-var">'field</span> <a href="#type-profunctor_term">profunctor_term</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'record</span>, <span class="type-var">'field</span> )</span> <a href="../../../base/Base/Field/index.html#type-t">Base.Field.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'field</span>, <span class="type-var">_</span>, <span class="type-var">_</span>, <span class="type-var">'record</span> )</span> <a href="Bare/Make_creator_types/index.html#type-handle_one_field">Bare.Make_creator_types.handle_one_field</a></span></span></code></div><div class="spec-doc"><p>Supply the term for one field.</p><p>The type of this function is designed to match up with <code>Fields.make_creator</code> (see the example).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-build_for_record" class="anchored"><a href="#val-build_for_record" class="anchor"></a><code><span><span class="keyword">val</span> build_for_record : 
  <span><span><span>( <span class="type-var">'record</span>, <span class="type-var">_</span>, <span class="type-var">'record</span> )</span> <a href="Bare/Make_creator_types/index.html#type-handle_all_fields">Bare.Make_creator_types.handle_all_fields</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'record</span> <a href="#type-profunctor_term">profunctor_term</a></span></span></code></div><div class="spec-doc"><p>Build the overarching profunctor for the whole record.</p><p>This takes a partial application of <code>Fields.make_creator</code> as its argument, which should supply no initial value but use <a href="#val-field"><code>field</code></a> to supply a term for every field of the record.</p><p>The type of this is designed to match up with <code>Fields.make_creator</code> (see the example).</p></div></div></div></body></html>