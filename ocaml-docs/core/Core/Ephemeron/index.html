<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ephemeron (core.Core.Ephemeron)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">core</a> &#x00BB; <a href="../index.html">Core</a> &#x00BB; Ephemeron</nav><header class="odoc-preamble"><h1>Module <code><span>Core.Ephemeron</span></code></h1><p>An ephemeron is a pair of pointers, one to a &quot;key&quot; and one to &quot;data&quot;.</p><p>The key pointer is a weak pointer: the garbage collector doesn't follow it when determining liveness. The garbage collector follows an ephemeron's data pointer iff the key is alive. If the garbage collector nulls an ephemeron's weak pointer then it also nulls the data pointer. Ephemerons are more powerful than weak pointers because they express conjunction of liveness -- the data in an ephemeron is live iff both the key <em>and</em> the ephemeron are live. See &quot;Ephemerons: A New Finalization Mechanism&quot;, Barry Hayes 1997.</p><p>This module is like the OCaml standard library module <code>Ephemerons.K1</code>, except that it requires that the keys and data are heap blocks.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 'b) t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sexp_of_t" class="anchored"><a href="#val-sexp_of_t" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_t : 
  <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Sexplib0</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span><a href="../../../base/Base/Unit/index.html#type-t">Base.Unit.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-set_key" class="anchored"><a href="#val-set_key" class="anchor"></a><code><span><span class="keyword">val</span> set_key : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span><span class="type-var">'a</span> <a href="../Heap_block/index.html#type-t">Heap_block.t</a></span> <a href="../../../base/Base/Option/index.html#type-t">Base.Option.t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../../../base/Base/Unit/index.html#type-t">Base.Unit.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-get_key" class="anchored"><a href="#val-get_key" class="anchor"></a><code><span><span class="keyword">val</span> get_key : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Heap_block/index.html#type-t">Heap_block.t</a></span> <a href="../../../base/Base/Option/index.html#type-t">Base.Option.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-set_data" class="anchored"><a href="#val-set_data" class="anchor"></a><code><span><span class="keyword">val</span> set_data : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">'b</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span><span class="type-var">'b</span> <a href="../Heap_block/index.html#type-t">Heap_block.t</a></span> <a href="../../../base/Base/Option/index.html#type-t">Base.Option.t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../../../base/Base/Unit/index.html#type-t">Base.Unit.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-get_data" class="anchored"><a href="#val-get_data" class="anchor"></a><code><span><span class="keyword">val</span> get_data : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">'b</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="../Heap_block/index.html#type-t">Heap_block.t</a></span> <a href="../../../base/Base/Option/index.html#type-t">Base.Option.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-is_key_some" class="anchored"><a href="#val-is_key_some" class="anchor"></a><code><span><span class="keyword">val</span> is_key_some : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../../../base/Base/Bool/index.html#type-t">Base.Bool.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-is_key_none" class="anchored"><a href="#val-is_key_none" class="anchor"></a><code><span><span class="keyword">val</span> is_key_none : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../../../base/Base/Bool/index.html#type-t">Base.Bool.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-is_data_some" class="anchored"><a href="#val-is_data_some" class="anchor"></a><code><span><span class="keyword">val</span> is_data_some : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../../../base/Base/Bool/index.html#type-t">Base.Bool.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-is_data_none" class="anchored"><a href="#val-is_data_none" class="anchor"></a><code><span><span class="keyword">val</span> is_data_none : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../../../base/Base/Bool/index.html#type-t">Base.Bool.t</a></span></code></div></div></div></body></html>