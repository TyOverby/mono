<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bonsai_web_ui_form (bonsai.Bonsai_web_ui_form)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">bonsai</a> &#x00BB; Bonsai_web_ui_form</nav><header class="odoc-preamble"><h1>Module <code><span>Bonsai_web_ui_form</span></code></h1></header><div class="odoc-content"><div class="odoc-include"><div class="odoc-spec"><div class="spec module" id="module-View" class="anchored"><a href="#module-View" class="anchor"></a><code><span><span class="keyword">module</span> <a href="View/index.html">View</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Bonsai-web-forms has its own view type so that it can build a more structured view of the form. You can convert it to a Vdom node with the <code>to_vdom*</code> functions.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-return" class="anchored"><a href="#val-return" class="anchor"></a><code><span><span class="keyword">val</span> return : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>return</code> produces a bonsai form that will always produce the same value. <code>set</code> and <code>normalize</code> will do nothing to the form provided by this.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-return_error" class="anchored"><a href="#val-return_error" class="anchor"></a><code><span><span class="keyword">val</span> return_error : <span><a href="../../core/Core/Error/index.html#type-t">Core.Error.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">_</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>return_error</code> produces a form that always fails validation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-map_error" class="anchored"><a href="#val-map_error" class="anchor"></a><code><span><span class="keyword">val</span> map_error : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>f:<span>( <span><a href="../../core/Core/Error/index.html#type-t">Core.Error.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../core/Core/Error/index.html#type-t">Core.Error.t</a> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-value" class="anchored"><a href="#val-value" class="anchor"></a><code><span><span class="keyword">val</span> value : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-value_or_default" class="anchored"><a href="#val-value_or_default" class="anchor"></a><code><span><span class="keyword">val</span> value_or_default : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>default:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-is_valid" class="anchored"><a href="#val-is_valid" class="anchor"></a><code><span><span class="keyword">val</span> is_valid : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_valid</code> returns true if <code>value</code> would return <code>Ok</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-view" class="anchored"><a href="#val-view" class="anchor"></a><code><span><span class="keyword">val</span> view : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="View/index.html#type-t">View.t</a></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Submit" class="anchored"><a href="#module-Submit" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Submit/index.html">Submit</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-view_as_vdom" class="anchored"><a href="#val-view_as_vdom" class="anchor"></a><code><span><span class="keyword">val</span> view_as_vdom : 
  <span>?on_submit:<span><span class="type-var">'a</span> <a href="Submit/index.html#type-t">Submit.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?editable:<span>[ `Yes_always <span>| `Currently_yes</span> <span>| `Currently_no</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../virtual_dom/Virtual_dom/Vdom/Node/index.html#type-t">Bonsai_web.Vdom.Node.t</a></span></code></div><div class="spec-doc"><p><code>view_as_vdom</code> produces the vdom representation of the form.</p><p><code>editable</code> defaults to <code>`Yes_always</code>, which should be used when form input can't be disabled. <code>`Currently_yes</code> allows editing, but generates less diff when toggled with <code>`Currently_no</code>. When <code>editable</code> is <code>`Currently_no</code>, the view is wrapped in a fieldset that disables all of the inputs in the form.</p><p>Regardless of the value of <code>editable</code>, scheduling the <code>Form.set</code> effect will still change the values in the form.</p><p>Known bugs: While setting editable to `Currently_no prevents modification of most browser-builtin input elements, some custom form elements like the drag-and-drop, multiselect, and removing items using the pills in typeahead-multi for don't currently respect this and can be modified anyway. Work is underway to fix these.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-set" class="anchored"><a href="#val-set" class="anchor"></a><code><span><span class="keyword">val</span> set : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Ui_effect.t</a></span></span></code></div><div class="spec-doc"><p><code>set</code> fills the form with the provided value, setting the contents of form-elements if possible</p></div></div><div class="odoc-spec"><div class="spec value" id="val-normalize" class="anchored"><a href="#val-normalize" class="anchor"></a><code><span><span class="keyword">val</span> normalize : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Ui_effect.t</a></span></span></code></div><div class="spec-doc"><p><code>normalize</code> sets the contents of a form to its current value. This only impacts values that have a &quot;normalized&quot; form. For example, a float-producing textbox being normalized might go from displaying &quot;1.000&quot; to &quot;1.&quot;</p></div></div><div class="odoc-spec"><div class="spec value" id="val-both" class="anchored"><a href="#val-both" class="anchor"></a><code><span><span class="keyword">val</span> both : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Combines two forms into another one that produces both values from the inputs in tupled form.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-project" class="anchored"><a href="#val-project" class="anchor"></a><code><span><span class="keyword">val</span> project : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>parse_exn:<span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span>unparse:<span>( <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>project</code> is the powerhouse of the library; Using this function, you can change the type produced. Think of it like <code>map</code>.</p><ul><li><code>parse_exn</code> is a function that converts &quot;forwards&quot;. As its name implies, you're free (and encouraged to) throw exceptions when the type conversion would fail.</li><li><code>unparse</code> goes in the opposite direction. This one must not throw.</li></ul><p>Example:</p><pre><code>let _ : int Form.t =
  project
    (a: string Form.t)
    ~parse_exn:Int.of_string
    ~unparse:Int.to_string</code></pre></div></div><div class="odoc-spec"><div class="spec value" id="val-project'" class="anchored"><a href="#val-project'" class="anchor"></a><code><span><span class="keyword">val</span> project' : 
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>parse:<span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unparse:<span>( <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>The same as <code>project</code> except that the <code>parse</code> function is <code>Or_error</code> returning.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-validate" class="anchored"><a href="#val-validate" class="anchor"></a><code><span><span class="keyword">val</span> validate : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>f:<span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>validate</code> can provide additional validation of a value, but unlike <code>project</code> or <code>project'</code>, it doesn't change the type of the resulting form</p></div></div><div class="odoc-spec"><div class="spec value" id="val-label" class="anchored"><a href="#val-label" class="anchor"></a><code><span><span class="keyword">val</span> label : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Adds a label to the form.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-label'" class="anchored"><a href="#val-label'" class="anchor"></a><code><span><span class="keyword">val</span> label' : <span><a href="../../virtual_dom/Virtual_dom/Vdom/Node/index.html#type-t">Bonsai_web.Vdom.Node.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Same as <code>label</code>, but it lets you use an arbitrary vdom node instead of just a string.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-tooltip" class="anchored"><a href="#val-tooltip" class="anchor"></a><code><span><span class="keyword">val</span> tooltip : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Adds a tooltip to the form.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-tooltip'" class="anchored"><a href="#val-tooltip'" class="anchor"></a><code><span><span class="keyword">val</span> tooltip' : <span><a href="../../virtual_dom/Virtual_dom/Vdom/Node/index.html#type-t">Bonsai_web.Vdom.Node.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Same as <code>tooltip</code>, but it lets you use an arbitrary vdom node instead of just a string.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-group" class="anchored"><a href="#val-group" class="anchor"></a><code><span><span class="keyword">val</span> group : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Sometimes it's nice to collect a bunch of forms under a label. Because <code>'a t</code> can represent multiple rows of forms, the <code>group</code> and <code>group'</code> functions put those rows underneath a header.Record_builder</p><pre>      group-name
        sub1 _________
        sub2 _________</pre></div></div><div class="odoc-spec"><div class="spec value" id="val-group'" class="anchored"><a href="#val-group'" class="anchor"></a><code><span><span class="keyword">val</span> group' : <span><a href="../../virtual_dom/Virtual_dom/Vdom/Node/index.html#type-t">Bonsai_web.Vdom.Node.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Same as <code>group</code>, but it lets you use an arbitrary vdom node instead of just a string.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-optional" class="anchored"><a href="#val-optional" class="anchor"></a><code><span><span class="keyword">val</span> optional : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>is_some:<span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span> <span>none:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> option</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>optional</code> takes a <code>'a t</code> and produces a <code>'a option t</code> when given a &quot;some detector&quot; and a token &quot;none&quot; value. <code>is_some none</code> must be false.</p><p>Example:</p><pre><code>let _ : string option t =
  optional
    (a: string t)
    ~is_some:(Fn.non String.is_empty)
    ~none:&quot;&quot;</code></pre></div></div><div class="odoc-spec"><div class="spec value" id="val-optional'" class="anchored"><a href="#val-optional'" class="anchor"></a><code><span><span class="keyword">val</span> optional' : 
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>parse:<span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> option</span> <a href="../../core/Core/Or_error/index.html#type-t">Core.Or_error.t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unparse:<span>( <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>none:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> option</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>An alternative &quot;optional form&quot; construction function; <code>optional'</code> gives you the ability to produce the full set of parse options:</p><ul><li>Ok (Some b)</li><li>Ok None</li><li>Error error] while also converting to another type (<code>'a -&gt; 'b option</code>) at the same time.</li></ul></div></div><div class="odoc-spec"><div class="spec module-substitution" id="module-Record_builder_lib" class="anchored"><a href="#module-Record_builder_lib" class="anchor"></a><code><span><span class="keyword">module</span> Record_builder_lib := <a href="../../record_builder/Record_builder/index.html">Record_builder</a></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Record_builder" class="anchored"><a href="#module-Record_builder" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Record_builder/index.html">Record_builder</a></span><span> : 
  <a href="../../profunctor/Profunctor/module-type-Record_builder/index.html">Profunctor.Record_builder</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="../../profunctor/Profunctor/module-type-Record_builder/index.html#type-profunctor_term">profunctor_term</a></span> := <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></span></code></div><div class="spec-doc"><p><code>Record_builder</code> is the primary way to compose form values using this library.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Dynamic" class="anchored"><a href="#module-Dynamic" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Dynamic/index.html">Dynamic</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Unlike the rest of the API which operates on values of type <code>Form.t</code> value values, they operate on <code>Form.t
    Value.t</code>, and typically return <code>Computation.t</code>.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Expert" class="anchored"><a href="#module-Expert" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Expert/index.html">Expert</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Private" class="anchored"><a href="#module-Private" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Private/index.html">Private</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div><div class="odoc-spec"><div class="spec module" id="module-Elements" class="anchored"><a href="#module-Elements" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Elements/index.html">Elements</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Typed" class="anchored"><a href="#module-Typed" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Typed/index.html">Typed</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The functions in this module can be hard to understand Please look at the examples in lib/bonsai/examples/forms/typed.ml</p></div></div></div></body></html>