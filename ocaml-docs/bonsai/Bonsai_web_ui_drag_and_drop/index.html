<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bonsai_web_ui_drag_and_drop (bonsai.Bonsai_web_ui_drag_and_drop)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">bonsai</a> &#x00BB; Bonsai_web_ui_drag_and_drop</nav><header class="odoc-preamble"><h1>Module <code><span>Bonsai_web_ui_drag_and_drop</span></code></h1><p>To use this API, first call <code>create</code> to make a &quot;universe&quot; where drag-and-drop can happen. It is possible, and sometimes desireable to create multiple universes; for example, if two parts of an interface support drag-and-drop, but they are not meant to interact, each should probably have their own universe.</p><p>Each universe provides a <code>source</code> attribute for designating nodes as draggable (it is named &quot;source&quot; rather than &quot;draggable&quot; because &quot;draggable&quot; is already the name of an HTML attribute), a <code>drop_target</code> attribute for designating nodes as droppable areas, and a <code>model</code> which exposes the current state of the drag-and-drop process so that the UI can provide good visual feedback.</p><p>The inputs to both <code>source</code> and <code>drop_target</code> get reflected in the <code>model</code>. For example, in a re-orderable list, the <code>source</code> could be an identifier pointing to the content being dragged, and the <code>drop_target</code> could be the position in the list that the target node corresponds to. Thus, when a node is dragged to hover over another node, it will be clear to the UI which items should receive visual flare to indicate that a drop is impending.</p><p>A formality in using this library is placing the <code>sentinel</code> attribute somewhere in the DOM. Doing so makes the state of the universe available to be directly affected in tests. Without a <code>sentinel</code>, the app will continue to work, but you will be unable to test drag-and-drop interactions.</p><p>There is nothing preventing a node from having two <code>drop_target</code> or two <code>source</code> attributes - such a node resides in both the universes universes. Dragging a source that is inside two universes onto a target will trigger the <code>on_drop</code> callbacks for one universe and cancel the dragging for the other one. Likewise, when dragging a source onto a target that resides in multiple universes, only the universe that the source is from will trigger it's <code>on_drop</code>. In other words, putting a node in multiple universes does the most obvious thing.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module" id="module-Model" class="anchored"><a href="#module-Model" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Model/index.html">Model</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>('source_id, 'target_id) t</span></span></code></div><div class="spec-doc"><p>Contains everything needed to build drag-and-drop components. Each value of this type represents its own universe of drag-and-drop attributes. Nodes which have the <code>source</code> attribute from one universe cannot be dragged on top of <code>drop_target</code>s from another universe.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-source" class="anchored"><a href="#val-source" class="anchor"></a><code><span><span class="keyword">val</span> source : 
  <span><span><span>( <span class="type-var">'source_id</span>, <span class="type-var">'target_id</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>id:<span class="type-var">'source_id</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../virtual_dom/Virtual_dom/Vdom/Attr/index.html#type-t">Virtual_dom.Vdom.Attr.t</a></span></code></div><div class="spec-doc"><p>A node with the <code>source</code> attribute will set its universe's currently dragged value to the input <code>'source_id</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sentinel" class="anchored"><a href="#val-sentinel" class="anchor"></a><code><span><span class="keyword">val</span> sentinel : 
  <span><span><span>( <span class="type-var">'source_id</span>, <span class="type-var">'target_id</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>name:string <span class="arrow">&#45;&gt;</span></span>
  <a href="../../virtual_dom/Virtual_dom/Vdom/Attr/index.html#type-t">Virtual_dom.Vdom.Attr.t</a></span></code></div><div class="spec-doc"><p>While this attribute does nothing while the app is running, it facilitates testing by allowing tests to directly change the state of the universe.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-drop_target" class="anchored"><a href="#val-drop_target" class="anchor"></a><code><span><span class="keyword">val</span> drop_target : 
  <span><span><span>( <span class="type-var">'source_id</span>, <span class="type-var">'target_id</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>id:<span class="type-var">'target_id</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../virtual_dom/Virtual_dom/Vdom/Attr/index.html#type-t">Virtual_dom.Vdom.Attr.t</a></span></code></div><div class="spec-doc"><p>Designates a &quot;drop zone&quot; node in a particular universe</p></div></div><div class="odoc-spec"><div class="spec value" id="val-model" class="anchored"><a href="#val-model" class="anchor"></a><code><span><span class="keyword">val</span> model : <span><span><span>( <span class="type-var">'source_id</span>, <span class="type-var">'target_id</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'source_id</span>, <span class="type-var">'target_id</span> )</span> <a href="Model/index.html#type-t">Model.t</a></span></span></code></div><div class="spec-doc"><p>Extracts the current state of the universe. This is useful for providing visual feedback about what will happen if an item is dropped</p></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : 
  <span><a href="../../core/Core/Source_code_position/index.html#type-t">Core.Source_code_position.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>source_id:<span>(<span class="keyword">module</span> <a href="../Bonsai/module-type-Model/index.html">Bonsai.Model</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../Bonsai/module-type-Model/index.html#type-t">t</a> = <span class="type-var">'source_id</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>target_id:<span>(<span class="keyword">module</span> <a href="../Bonsai/module-type-Model/index.html">Bonsai.Model</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../Bonsai/module-type-Model/index.html#type-t">t</a> = <span class="type-var">'target_id</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>on_drop:<span><span>( <span><span class="type-var">'source_id</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'target_id</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Ui_effect.t</a></span> )</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'source_id</span>, <span class="type-var">'target_id</span> )</span> <a href="#type-t">t</a></span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div><div class="spec-doc"><p>Creates a new drag-and-drop universe.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-dragged_element" class="anchored"><a href="#val-dragged_element" class="anchor"></a><code><span><span class="keyword">val</span> dragged_element : 
  <span><span><span><span>( <span class="type-var">'source_id</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:
    <span>( <span><span><span class="type-var">'source_id</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
      <span><a href="../../virtual_dom/Virtual_dom/Vdom/Node/index.html#type-t">Virtual_dom.Vdom.Node.t</a> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../virtual_dom/Virtual_dom/Vdom/Node/index.html#type-t">Virtual_dom.Vdom.Node.t</a> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div><div class="spec-doc"><p>A node which is follows the mouse when something is being dragged, but is invisible otherwise. The result of <code>f</code> is wrapped in a <code>div</code> which has the same dimensions as the element which was originally dragged, allowing the drag operation to look visually seamless.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-For_testing" class="anchored"><a href="#module-For_testing" class="anchor"></a><code><span><span class="keyword">module</span> <a href="For_testing/index.html">For_testing</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>