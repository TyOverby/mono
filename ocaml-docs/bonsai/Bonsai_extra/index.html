<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bonsai_extra (bonsai.Bonsai_extra)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">bonsai</a> &#x00BB; Bonsai_extra</nav><header class="odoc-preamble"><h1>Module <code><span>Bonsai_extra</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value" id="val-map_of_set" class="anchored"><a href="#val-map_of_set" class="anchor"></a><code><span><span class="keyword">val</span> map_of_set : 
  <span><span><span><span>( <span class="type-var">'k</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Set/index.html#type-t">Core.Set.t</a></span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'k</span>, unit, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-map_keys" class="anchored"><a href="#val-map_keys" class="anchor"></a><code><span><span class="keyword">val</span> map_keys : 
  <span><span><span><span>( <span class="type-var">'k</span>, <span class="type-var">_</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'k</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Set/index.html#type-t">Core.Set.t</a></span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-toggle" class="anchored"><a href="#val-toggle" class="anchor"></a><code><span><span class="keyword">val</span> toggle : 
  <span><a href="../../core/Core/Source_code_position/index.html#type-t">Core.Source_code_position.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>default_model:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span>(bool * <span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Bonsai.Effect.t</a></span>)</span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-map_merge" class="anchored"><a href="#val-map_merge" class="anchor"></a><code><span><span class="keyword">val</span> map_merge : 
  <span><span><span><span>( <span class="type-var">'k</span>, <span class="type-var">'v1</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span>( <span class="type-var">'k</span>, <span class="type-var">'v2</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:
    <span>( <span>key:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span>[ <span>`Both of <span class="type-var">'v1</span> * <span class="type-var">'v2</span></span> <span><span>| `Left</span> of <span class="type-var">'v1</span></span> <span><span>| `Right</span> of <span class="type-var">'v2</span></span> ]</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="type-var">'v</span> option</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span> )</span> <a href="../../core/Core/Map/index.html#type-t">Core.Map.t</a></span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-with_inject_fixed_point" class="anchored"><a href="#val-with_inject_fixed_point" class="anchor"></a><code><span><span class="keyword">val</span> with_inject_fixed_point : 
  <span><span>( <span><span><span>( <span><span class="type-var">'action</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Bonsai.Effect.t</a></span> )</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
    <span><span>(<span class="type-var">'result</span> * <span>( <span><span class="type-var">'action</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Bonsai.Effect.t</a></span> )</span>)</span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'result</span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div><div class="spec-doc"><p><code>with_inject_fixed_point</code> allows an injection function produced as the result of a computation to be used as the input of that same combination. This &quot;tie-the-knot&quot; operation is legal because actions are scheduled independently of computation evaluation, allowing us to break what seems like a dependency loop.</p><p>However, it is important that the input injection function isn't the same one that is returned by the computation (or even a component of the returned injection function). If that happens, an action being triggered will cause an inifinite loop to occur in the aciton scheduler.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-yoink" class="anchored"><a href="#val-yoink" class="anchor"></a><code><span><span class="keyword">val</span> yoink : <span><span><span class="type-var">'a</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../virtual_dom/Ui_effect/index.html#type-t">Bonsai.Effect.t</a></span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div><div class="spec-doc"><p><code>yoink</code> is a function that takes a bonsai value and produces a computation producing an effect which fetches the current value out of the input. This can be useful inside of <code>let%bind.Effect</code> chains, where a value that you've closed over is stale and you want to witness a value after it's been changed by a previous effect.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-scope_model" class="anchored"><a href="#val-scope_model" class="anchor"></a><code><span><span class="keyword">val</span> scope_model : 
  <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">_</span> )</span> <a href="../Bonsai/index.html#type-comparator">Bonsai.comparator</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>on:<span><span class="type-var">'a</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b</span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div><div class="spec-doc"><p><code>scope_model</code> allows you to have a different model for the provided computation, keyed by some other value.</p><p>Suppose for example, that you had a form for editing details about a person. This form should have different state for each person. You could use scope_model, where the <code>~on</code> parameter is set to a user-id, and now when that value changes, the model for the other computation is set to the model for that particular user.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pipe" class="anchored"><a href="#val-pipe" class="anchor"></a><code><span><span class="keyword">val</span> pipe : 
  <span><a href="../../core/Core/Source_code_position/index.html#type-t">Core.Source_code_position.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="keyword">module</span> <a href="../Bonsai/module-type-Model/index.html">Bonsai.Model</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../Bonsai/module-type-Model/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Ui_effect.t</a></span> )</span> * <span><span class="type-var">'a</span> <a href="../../virtual_dom/Ui_effect/index.html#type-t">Bonsai.Effect.t</a></span>)</span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div><div class="spec-doc"><p><code>pipe</code> constructs a pipe of <code>a</code> and returns a pair containing an injection function that enqueues items and an Effect that dequeues them.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-exactly_once" class="anchored"><a href="#val-exactly_once" class="anchor"></a><code><span><span class="keyword">val</span> exactly_once : 
  <span><a href="../../core/Core/Source_code_position/index.html#type-t">Core.Source_code_position.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Ui_effect.t</a></span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div><div class="spec-doc"><p>As its name implies, <code>exactly_once</code> runs the event passed in via <code>Value.t</code> exactly once.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-exactly_once_with_value" class="anchored"><a href="#val-exactly_once_with_value" class="anchor"></a><code><span><span class="keyword">val</span> exactly_once_with_value : 
  <span><a href="../../core/Core/Source_code_position/index.html#type-t">Core.Source_code_position.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="keyword">module</span> <a href="../Bonsai/module-type-Model/index.html">Bonsai.Model</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../Bonsai/module-type-Model/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span class="type-var">'a</span> <a href="../../virtual_dom/Ui_effect/index.html#type-t">Ui_effect.t</a></span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> option</span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div><div class="spec-doc"><p>As its name implies, <code>exactly_once</code> runs the event passed in via <code>Value.t</code> exactly once. The return value is stored and returned. <code>None</code> is returned while the effect is executing.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-freeze" class="anchored"><a href="#val-freeze" class="anchor"></a><code><span><span class="keyword">val</span> freeze : 
  <span><a href="../../core/Core/Source_code_position/index.html#type-t">Core.Source_code_position.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="keyword">module</span> <a href="../Bonsai/module-type-Model/index.html">Bonsai.Model</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../Bonsai/module-type-Model/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div><div class="spec-doc"><p><code>freeze</code> takes a Value.t and returns a computation whose output is frozen to be the first value that passed through the input.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-thunk" class="anchored"><a href="#val-thunk" class="anchor"></a><code><span><span class="keyword">val</span> thunk : <span><span>( <span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-state_machine0_dynamic_model" class="anchored"><a href="#val-state_machine0_dynamic_model" class="anchor"></a><code><span><span class="keyword">val</span> state_machine0_dynamic_model : 
  <span><a href="../../core/Core/Source_code_position/index.html#type-t">Core.Source_code_position.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="keyword">module</span> <a href="../Bonsai/module-type-Model/index.html">Bonsai.Model</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../Bonsai/module-type-Model/index.html#type-t">t</a> = <span class="type-var">'model</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="keyword">module</span> <a href="../Bonsai/module-type-Action/index.html">Bonsai.Action</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../Bonsai/module-type-Action/index.html#type-t">t</a> = <span class="type-var">'action</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>model:
    <span>[&lt; <span>`Computed of <span><span>( <span><span><span class="type-var">'model</span> option</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'model</span> )</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span></span>
    <span><span>| `Given</span> of <span><span class="type-var">'model</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span></span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span>apply_action:
    <span>( <span>inject:<span>( <span><span class="type-var">'action</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Ui_effect.t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span>
      <span>schedule_event:<span>( <span><span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Ui_effect.t</a></span> <span class="arrow">&#45;&gt;</span></span> unit )</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="type-var">'model</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="type-var">'action</span> <span class="arrow">&#45;&gt;</span></span>
      <span class="type-var">'model</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'model</span> * <span>( <span><span class="type-var">'action</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Ui_effect.t</a></span> )</span>)</span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div><div class="spec-doc"><p>This function is identical to <code>Bonsai.state_machine0</code> except that the <code>default_model</code> is initially unset, but can be computed or defaulted to a dynamic value.</p><p>This means that before an apply_action occurs, the model can change out from underneath the state machine as the default_model value changes. If this is undesirable, you may want to <code>freeze</code> the default_model first.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-state_machine1_dynamic_model" class="anchored"><a href="#val-state_machine1_dynamic_model" class="anchor"></a><code><span><span class="keyword">val</span> state_machine1_dynamic_model : 
  <span><a href="../../core/Core/Source_code_position/index.html#type-t">Core.Source_code_position.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="keyword">module</span> <a href="../Bonsai/module-type-Model/index.html">Bonsai.Model</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../Bonsai/module-type-Model/index.html#type-t">t</a> = <span class="type-var">'model</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="keyword">module</span> <a href="../Bonsai/module-type-Action/index.html">Bonsai.Action</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../Bonsai/module-type-Action/index.html#type-t">t</a> = <span class="type-var">'action</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>model:
    <span>[&lt; <span>`Computed of <span><span>( <span><span><span class="type-var">'model</span> option</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'model</span> )</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span></span>
    <span><span>| `Given</span> of <span><span class="type-var">'model</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span></span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span>apply_action:
    <span>( <span>inject:<span>( <span><span class="type-var">'action</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Ui_effect.t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span>
      <span>schedule_event:<span>( <span><span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Ui_effect.t</a></span> <span class="arrow">&#45;&gt;</span></span> unit )</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="type-var">'input</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="type-var">'model</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="type-var">'action</span> <span class="arrow">&#45;&gt;</span></span>
      <span class="type-var">'model</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'input</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'model</span> * <span>( <span><span class="type-var">'action</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Ui_effect.t</a></span> )</span>)</span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div><div class="spec-doc"><p>Read the docs for <code>state_machine0_dynamic_model</code>. This one has an extra <code>'input</code> value that can be taken into account when the <code>apply_action</code> is invoked.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-state_dynamic_model" class="anchored"><a href="#val-state_dynamic_model" class="anchor"></a><code><span><span class="keyword">val</span> state_dynamic_model : 
  <span><a href="../../core/Core/Source_code_position/index.html#type-t">Core.Source_code_position.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="keyword">module</span> <a href="../Bonsai/module-type-Model/index.html">Bonsai.Model</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../Bonsai/module-type-Model/index.html#type-t">t</a> = <span class="type-var">'model</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>model:
    <span>[&lt; <span>`Computed of <span><span>( <span><span><span class="type-var">'model</span> option</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'model</span> )</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span></span>
    <span><span>| `Given</span> of <span><span class="type-var">'model</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span></span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'model</span> * <span>( <span><span class="type-var">'model</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Ui_effect.t</a></span> )</span>)</span> <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div><div class="spec-doc"><p>The analog of <code>Bonsai.state</code>, but with a dynamic model. Read the docs for <code>state_machine0_dynamic_model</code></p></div></div><div class="odoc-spec"><div class="spec module" id="module-Id_gen" class="anchored"><a href="#module-Id_gen" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Id_gen/index.html">Id_gen</a></span><span> (<a href="Id_gen/argument-1-T/index.html">T</a> : <a href="../../core/Core/Int_intf/module-type-S/index.html">Core.Int_intf.S</a>) () : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Id_gen builds a component which generates unique identifiers by starting at 0 and incrementing by one every time that the effect is called.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mirror" class="anchored"><a href="#val-mirror" class="anchor"></a><code><span><span class="keyword">val</span> mirror : 
  <span><a href="../../core/Core/Source_code_position/index.html#type-t">Core.Source_code_position.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="keyword">module</span> <a href="../Bonsai/module-type-Model/index.html">Bonsai.Model</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../Bonsai/module-type-Model/index.html#type-t">t</a> = <span class="type-var">'m</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>store_set:<span><span>( <span><span class="type-var">'m</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Ui_effect.t</a></span> )</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>store_value:<span><span class="type-var">'m</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>interactive_set:<span><span>( <span><span class="type-var">'m</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../../virtual_dom/Ui_effect/index.html#type-t">Ui_effect.t</a></span> )</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>interactive_value:<span><span class="type-var">'m</span> <a href="../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../Bonsai/Computation/index.html#type-t">Bonsai.Computation.t</a></span></span></code></div><div class="spec-doc"><p><code>mirror</code> is used to reflect state back and forth between locations. Frequently this will be used to back up a components model in a more persistent form of storage, such as the URL, or local-storage.</p><p>The gist of this combinator is that if you have two states that you'd like to be synchronized, you can feed the &quot;current value&quot; and &quot;set value&quot; functions for both states into <code>mirror</code> and they'll automatically be kept up to date. Either of these can be backed by any kind of structure, but there are some important differences in their symmetry.</p><p>When the component is first loaded, <code>store</code> has priority, so if the values are different, <code>store</code> wins, and <code>interactive</code> has its value &quot;set&quot;. From that point on, if either incoming value changes, the opposite setter is called. In the case that both <code>store</code> and <code>interactive</code> change at the same time, the tie is broken in favor of <code>interactive</code>, and <code>store_set</code> is called.</p></div></div></div></body></html>