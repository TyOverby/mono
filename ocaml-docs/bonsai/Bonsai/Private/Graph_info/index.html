<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Graph_info (bonsai.Bonsai.Private.Graph_info)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">bonsai</a> &#x00BB; <a href="../../index.html">Bonsai</a> &#x00BB; <a href="../index.html">Private</a> &#x00BB; Graph_info</nav><header class="odoc-preamble"><h1>Module <code><span>Private.Graph_info</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module" id="module-Node_info" class="anchored"><a href="#module-Node_info" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Node_info/index.html">Node_info</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>{</span></code><table><tr id="type-t.tree" class="anchored"><td class="def record field"><a href="#type-t.tree" class="anchor"></a><code><span>tree : <span><span>( <span class="xref-unresolved">Bonsai__Node_path.Map.Key.t</span>,
         <span class="xref-unresolved">Bonsai__Node_path.t</span>,
         <span class="xref-unresolved">Bonsai__Node_path.Map.Key.comparator_witness</span> )</span>
         <a href="../../../../base/Base/Map/index.html#type-t">Core.Map_intf.Map.t</a></span>;</span></code></td></tr><tr id="type-t.dag" class="anchored"><td class="def record field"><a href="#type-t.dag" class="anchor"></a><code><span>dag : <span><span>( <span class="xref-unresolved">Bonsai__Node_path.Map.Key.t</span>,
        <span><span class="xref-unresolved">Bonsai__Node_path.t</span> list</span>,
        <span class="xref-unresolved">Bonsai__Node_path.Map.Key.comparator_witness</span> )</span>
        <a href="../../../../base/Base/Map/index.html#type-t">Core.Map_intf.Map.t</a></span>;</span></code></td></tr><tr id="type-t.info" class="anchored"><td class="def record field"><a href="#type-t.info" class="anchor"></a><code><span>info : <span><span>( <span class="xref-unresolved">Bonsai__Node_path.Map.Key.t</span>,
         <a href="Node_info/index.html#type-t">Node_info.t</a>,
         <span class="xref-unresolved">Bonsai__Node_path.Map.Key.comparator_witness</span> )</span>
         <a href="../../../../base/Base/Map/index.html#type-t">Core.Map_intf.Map.t</a></span>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>There are a few models for understanding a <code>Computation.t</code>.</p><ul><li>As the tree of data that gets manipulated at eval-time. This tree understanding is quite close to the lexical structure of the program that produced the tree, so the tree model is useful for understanding where in your program each node came from.</li><li>As the directed-acyclic-graph (DAG) which exposes the sharing of computation in the graph. This model is useful for checking that computations are not being needlessly computed twice (i.e. they are being shared). Note that the computation inside an <code>Assoc</code> has only one copy in this model, even though the computation must run for every single entry in the input map.</li><li>As the incremental graph produced by <code>eval</code>. We do not currently generate this version of the graph, since it cannot be determined by static analysis of the Bonsai graph.</li></ul><p>We expose the first two of these models as the <code>tree</code> and <code>dag</code> properties, represented as a map from dependency(s) to dependent. In addition, we also expose a mapping of nodes to node metadata.</p></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../../../../bin_prot/Bin_prot/Binable/module-type-S/index.html">Bin_prot.Binable.S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../../bin_prot/Bin_prot/Binable/module-type-S/index.html#type-t">t</a> := <a href="#type-t">t</a></span></span></code></summary><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../../../../bin_prot/Bin_prot/Binable/module-type-S_only_functions/index.html">Bin_prot.Binable.S_only_functions</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../../bin_prot/Bin_prot/Binable/module-type-S_only_functions/index.html#type-t">t</a> := <a href="#type-t">t</a></span></span></code></summary><div class="odoc-spec"><div class="spec value" id="val-bin_size_t" class="anchored"><a href="#val-bin_size_t" class="anchor"></a><code><span><span class="keyword">val</span> bin_size_t : <span><a href="#type-t">t</a> <a href="../../../../bin_prot/Bin_prot/Size/index.html#type-sizer">Bin_prot.Size.sizer</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bin_write_t" class="anchored"><a href="#val-bin_write_t" class="anchor"></a><code><span><span class="keyword">val</span> bin_write_t : <span><a href="#type-t">t</a> <a href="../../../../bin_prot/Bin_prot/Write/index.html#type-writer">Bin_prot.Write.writer</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bin_read_t" class="anchored"><a href="#val-bin_read_t" class="anchor"></a><code><span><span class="keyword">val</span> bin_read_t : <span><a href="#type-t">t</a> <a href="../../../../bin_prot/Bin_prot/Read/index.html#type-reader">Bin_prot.Read.reader</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-__bin_read_t__" class="anchored"><a href="#val-__bin_read_t__" class="anchor"></a><code><span><span class="keyword">val</span> __bin_read_t__ : <span><span>( <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a> )</span> <a href="../../../../bin_prot/Bin_prot/Read/index.html#type-reader">Bin_prot.Read.reader</a></span></span></code></div><div class="spec-doc"><p>This function only needs implementation if <code>t</code> exposed to be a polymorphic variant. Despite what the type reads, this does *not* produce a function after reading; instead it takes the constructor tag (int) before reading and reads the rest of the variant <code>t</code> afterwards.</p></div></div></details></div><div class="odoc-spec"><div class="spec value" id="val-bin_shape_t" class="anchored"><a href="#val-bin_shape_t" class="anchor"></a><code><span><span class="keyword">val</span> bin_shape_t : <a href="../../../../bin_prot/Bin_prot/Shape/index.html#type-t">Bin_prot.Shape.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bin_writer_t" class="anchored"><a href="#val-bin_writer_t" class="anchor"></a><code><span><span class="keyword">val</span> bin_writer_t : <span><a href="#type-t">t</a> <a href="../../../../bin_prot/Bin_prot/Type_class/index.html#type-writer">Bin_prot.Type_class.writer</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bin_reader_t" class="anchored"><a href="#val-bin_reader_t" class="anchor"></a><code><span><span class="keyword">val</span> bin_reader_t : <span><a href="#type-t">t</a> <a href="../../../../bin_prot/Bin_prot/Type_class/index.html#type-reader">Bin_prot.Type_class.reader</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bin_t" class="anchored"><a href="#val-bin_t" class="anchor"></a><code><span><span class="keyword">val</span> bin_t : <span><a href="#type-t">t</a> <a href="../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a></span></span></code></div></div></details></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="xref-unresolved">Sexplib0</span>.Sexpable.S <span class="keyword">with</span> <span><span class="keyword">type</span> <span class="xref-unresolved">t</span> := <span class="xref-unresolved">t</span></span></span></code></summary><div class="odoc-spec"><div class="spec value" id="val-t_of_sexp" class="anchored"><a href="#val-t_of_sexp" class="anchor"></a><code><span><span class="keyword">val</span> t_of_sexp : <span><span class="xref-unresolved">Sexplib0__</span>.Sexp.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sexp_of_t" class="anchored"><a href="#val-sexp_of_t" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_t : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0__</span>.Sexp.t</span></code></div></div></details></div><div class="odoc-spec"><div class="spec value" id="val-empty" class="anchored"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-iter_graph_updates" class="anchored"><a href="#val-iter_graph_updates" class="anchor"></a><code><span><span class="keyword">val</span> iter_graph_updates : 
  <span><span><span>( <span class="type-var">'model</span>, <span class="type-var">'static_action</span>, <span class="type-var">'dynamic_action</span>, <span class="type-var">'result</span> )</span> <a href="../../Computation/index.html#type-t">Computation.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>on_update:<span>( <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'model</span>, <span class="type-var">'static_action</span>, <span class="type-var">'dynamic_action</span>, <span class="type-var">'result</span> )</span> <a href="../../Computation/index.html#type-t">Computation.t</a></span></span></code></div><div class="spec-doc"><p>Iterate through a computation to build up a <code>t</code> with information about the graph. The <code>Lazy</code> portions of the graph are traversed lazily; thus, rather than putting the resulting <code>t</code> in the return value of this function, we require a callback for receiving all the updates, including the immediately traversed ones and the ones that are delayed by <code>Lazy</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-iter_graph_updates_packed" class="anchored"><a href="#val-iter_graph_updates_packed" class="anchor"></a><code><span><span class="keyword">val</span> iter_graph_updates_packed : 
  <span><span><span class="type-var">'a</span> <a href="../../Computation/index.html#type-packed">Computation.packed</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>on_update:<span>( <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="../../Computation/index.html#type-packed">Computation.packed</a></span></span></code></div></div></div></body></html>