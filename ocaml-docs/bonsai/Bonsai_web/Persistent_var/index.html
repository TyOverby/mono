<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Persistent_var (bonsai.Bonsai_web.Persistent_var)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">bonsai</a> &#x00BB; <a href="../index.html">Bonsai_web</a> &#x00BB; Persistent_var</nav><header class="odoc-preamble"><h1>Module <code><span>Bonsai_web.Persistent_var</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : 
  <span><span>(<span class="keyword">module</span> <a href="../../../core/Core/Sexpable/module-type-S/index.html">Core.Sexpable</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../../core/Core/Sexpable/module-type-S/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>[ `Local_storage <span>| `Session_storage</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unique_id:string <span class="arrow">&#45;&gt;</span></span>
  <span>default:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>A Persistent_var.t is similar to Bonsai.Var.t, but the contents of the var are persisted into either local storage or session storage.</p><p>Creating a persistent var requires that the type contained inside the var to be sexpable, so a first class module for the type should be passed in.</p><p>You have a choice between Local Storage and Session Storage for actually persisting things; The docs for which can be found here:</p><ul><li>https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage</li><li>https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage</li></ul><p>A <code>unique_id</code> is required for the storage. This value needs to be unique per application.</p><p>Finally, a fallback is required for when the value can't be found, or it can't be deserialized.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-update" class="anchored"><a href="#val-update" class="anchor"></a><code><span><span class="keyword">val</span> update : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>f:<span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-set" class="anchored"><a href="#val-set" class="anchor"></a><code><span><span class="keyword">val</span> set : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-get" class="anchored"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-value" class="anchored"><a href="#val-value" class="anchor"></a><code><span><span class="keyword">val</span> value : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../../Bonsai/Value/index.html#type-t">Bonsai.Value.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-clear_persistence" class="anchored"><a href="#val-clear_persistence" class="anchor"></a><code><span><span class="keyword">val</span> clear_persistence : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>This will remove the value from localstorage or sessionstorage. (calling <code>set</code> or <code>update</code> afterwards will still store the value back again.)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-effect" class="anchored"><a href="#val-effect" class="anchor"></a><code><span><span class="keyword">val</span> effect : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../Effect/index.html#type-t">Effect.t</a></span></span></code></div><div class="spec-doc"><p>By asking for the vars effect, you get a function that can be easily threaded through your components and triggered inside an action-application or inside of an event listener.</p></div></div></div></body></html>